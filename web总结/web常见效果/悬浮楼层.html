<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>悬浮楼层</title>
<style>
*{ margin: 0; padding: 0; list-style: none; }
.floorbox{ position:relative; width:1000px; border:2px solid #0088BB; overflow:hidden; clear:both; margin:30px auto 0;}
.floorbox ul li{width:300px; height:300px; background:#C1C1C1; float:left; margin-top:10px; margin:10px;}
.floormenu { position:fixed; top: 100px; left: 50%; margin-left: 500px; width: 50px; }
.floormenu ul li a { display: block; margin: 5px 0; font-size: 14px; font-weight: bold; color: #333; width: 80px; height: 50px; line-height: 50px; text-decoration: none; text-align: center; }
.floormenu ul li a:hover, .floormenu ul li a.current { color: #fff; background: #0088bb; }
</style>

</head>

<body>

<div class="floormenu">
   <ul>
    <li><a href="#floor1" class="current">1F</a></li>
    <li><a href="#floor2">2F</a></li>
    <li><a href="#floor3">3F</a></li>
    <li><a href="#floor4">4F</a></li>
    <li><a href="#floor5">5F</a></li>
  </ul>
</div>

<div id="floor1" class="floorbox">
   <h2>1F</h2>
   <ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>


<div id="floor2" class="floorbox">
   <h2>2F</h2>
   <ul>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>


<div id="floor3" class="floorbox">
   <h2>3F</h2>
   <ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>



<div id="floor4" class="floorbox">
   <h2>4F</h2>
   <ul>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>





<div id="floor5" class="floorbox">
   <h2>5F</h2>
   <ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>




<script src="js/jquery-1.11.0.min.js"></script>
<script type="text/javascript">
$(function(){
	 $(window).scroll(function(){
		 var floorboxs = $(".floorbox");
		 var floormenu = $(".floormenu")
		 var boxtop = $(document).scrollTop();
         var currentId = ""; //滚动条现在所在位置的box id
		 floorboxs.each(function(){
                    var m = $(this);
                    //注意：m.offset().top代表每一个item的顶部位置
                    if (boxtop > m.offset().top - 300) {
                        currentId = "#" + m.attr("id");
                    } else {
                        return false;
                    };
					
					var currentLink = floormenu.find(".current");
					if (currentLink.attr("href") != currentId) {
						currentLink.removeClass("current");
						floormenu.find("[href=" + currentId + "]").addClass("current");
					};
									
		});
		 
	 });
	
                    //使锚点平滑向上滚动
					$(".floormenu a").click(function () {
					$("html, body").animate({
					scrollTop: $($(this).attr("href")).offset().top
					}, 500);
					return false;
					});	
					
});



</script>
</body>
</html>






















