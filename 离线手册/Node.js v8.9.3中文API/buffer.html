<!DOCTYPE html>
<!-- saved from url=(0032)buffer.html -->
<html lang="zh-cmn-Hans"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width">
  <title>Buffer | Node.js API 文档</title>
  <link rel="stylesheet" href="./buffer_files/api.css">
  <link rel="icon" sizes="32x32" type="image/png" href="http://nodejs.cn/static/favicon.png">
</head>
<body class="alt apidoc" id="api-section-buffer">
  <div id="content" class="clearfix">
    <div id="column2" class="interior">
      <div id="intro" class="interior">
        <a href="http://nodejs.cn/">
          Node.js 中文网
        </a>
        <div>
          <input placeholder="API 快速搜索" id="search_input">
        </div>
      </div>
      <ul>
<li><a class="nav-assert" href="assert.html">assert - 断言</a></li>
<li><a class="nav-buffer active" href="buffer.html">Buffer - 缓冲器</a></li>
<li><a class="nav-child_process" href="child_process.html">child_process - 子进程</a></li>
<li><a class="nav-cluster" href="cluster.html">cluster - 集群</a></li>
<li><a class="nav-console" href="console.html">console - 控制台</a></li>
<li><a class="nav-crypto" href="crypto.html">crypto - 加密</a></li>
<li><a class="nav-dgram" href="dgram.html">dgram - 数据报</a></li>
<li><a class="nav-dns" href="dns.html">dns - 域名服务器</a></li>
<li><a class="nav-errors" href="errors.html">Error - 异常</a></li>
<li><a class="nav-events" href="events.html">events - 事件</a></li>
<li><a class="nav-fs" href="fs.html">fs - 文件系统</a></li>
<li><a class="nav-globals" href="globals.html">global - 全局变量</a></li>
<li><a class="nav-http" href="http.html">http - HTTP</a></li>
<li><a class="nav-https" href="https.html">https - HTTPS</a></li>
<li><a class="nav-modules" href="modules.html">module - 模块</a></li>
<li><a class="nav-net" href="net.html">net - 网络</a></li>
<li><a class="nav-os" href="os.html">os - 操作系统</a></li>
<li><a class="nav-path" href="path.html">path - 路径</a></li>
<li><a class="nav-process" href="process.html">process - 进程</a></li>
<li><a class="nav-querystring" href="querystring.html">querystring - 查询字符串</a></li>
<li><a class="nav-readline" href="readline.html">readline - 逐行读取</a></li>
<li><a class="nav-repl" href="repl.html">repl - 交互式解释器</a></li>
<li><a class="nav-stream" href="stream.html">stream - 流</a></li>
<li><a class="nav-string_decoder" href="string_decoder.html">string_decoder - 字符串解码器</a></li>
<li><a class="nav-timers" href="timers.html">timer - 定时器</a></li>
<li><a class="nav-tls" href="tls.html">tls - 安全传输层</a></li>
<li><a class="nav-tty" href="tty.html">tty - 终端</a></li>
<li><a class="nav-url" href="url.html">url - 网址</a></li>
<li><a class="nav-util" href="util.html">util - 实用工具</a></li>
<li><a class="nav-v8" href="v8.html">v8 - V8引擎</a></li>
<li><a class="nav-vm" href="vm.html">vm - 虚拟机</a></li>
<li><a class="nav-zlib" href="zlib.html">zlib - 压缩</a></li>
</ul>
<div class="line"></div>

<ul>
<li><a class="nav--api-documentation-documentation_stability_index" href="documentation.html#documentation_stability_index">试验的API</a></li>
<li><a class="nav-async_hooks" href="async_hooks.html">async_hooks</a></li>
<li><a class="nav-http2" href="http2.html">http2</a></li>
<li><a class="nav-inspector" href="inspector.html">inspector</a></li>
<li><a class="nav-n-api" href="n-api.html">napi</a></li>
<li><a class="nav-perf_hooks" href="perf_hooks.html">perf_hooks</a></li>
</ul>
<div class="line"></div>

<ul>
<li><a class="nav-deprecations" href="deprecations.html">废弃的API</a></li>
<li><a class="nav-domain" href="domain.html">domain</a></li>
<li><a class="nav-punycode" href="punycode.html">punycode</a></li>
</ul>
<div class="line"></div>

<ul>
<li><a class="nav-documentation" href="documentation.html">关于本文档</a></li>
<li><a class="nav-synopsis" href="synopsis.html">用法与例子</a></li>
<li><a class="nav-addons" href="addons.html">C++插件</a></li>
<li><a class="nav-cli" href="cli.html">命令行选项</a></li>
<li><a class="nav-debugger" href="debugger.html">debugger调试器</a></li>
<li><a class="nav-intl" href="intl.html">国际化</a></li>
<li><a class="nav-tracing" href="tracing.html">事件跟踪</a></li>
<li><a class="nav-esm" href="esm.html">ECMAScript 模块</a></li>
</ul>

    </div>

    <div id="column1" data-id="buffer" class="interior">
      <header>
        <h1>Node.js v8.9.3 文档</h1>
        <div id="gtoc">
          <p>
            <a href="" name="toc">返回文档首页</a>
            <!--<a href="/api/all.html">单页面显示</a> |-->
            <!--<a href="/api/buffer.json">JSON格式</a> |-->
            <!--<a href="/api/en/buffer.html">查看英文版</a>-->
          </p>
        </div>
        <hr>
      </header>

      <div id="toc">
        <h2>目录</h2>
        <ul>
<li><span class="stability_2"><a href="buffer.html#buffer_buffer">Buffer (缓冲)</a></span><ul>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffer_from_buffer_alloc_and_buffer_allocunsafe"><code>Buffer.from()</code>, <code>Buffer.alloc()</code>, and <code>Buffer.allocUnsafe()</code></a></span><ul>
<li><span class="stability_undefined"><a href="buffer.html#buffer_the_zero_fill_buffers_command_line_option"><code>--zero-fill-buffers</code> 命令行选项</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_what_makes_buffer_allocunsafe_and_buffer_allocunsafeslow_unsafe">是什么令 <code>Buffer.allocUnsafe()</code> 和 <code>Buffer.allocUnsafeSlow()</code> 不安全？</a></span></li>
</ul>
</li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffers_and_character_encodings">Buffer 与字符编码</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffers_and_typedarray">Buffer 与 TypedArray</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffers_and_es6_iteration">Buffer 与 ES6 迭代器</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_buffer">Buffer 类</a></span><ul>
<li><span class="stability_0"><a href="buffer.html#buffer_new_buffer_array">new Buffer(array)</a></span></li>
<li><span class="stability_0"><a href="buffer.html#buffer_new_buffer_arraybuffer_byteoffset_length">new Buffer(arrayBuffer[, byteOffset [, length]])</a></span></li>
<li><span class="stability_0"><a href="buffer.html#buffer_new_buffer_buffer">new Buffer(buffer)</a></span></li>
<li><span class="stability_0"><a href="buffer.html#buffer_new_buffer_size">new Buffer(size)</a></span></li>
<li><span class="stability_0"><a href="buffer.html#buffer_new_buffer_string_encoding">new Buffer(string[, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding">类方法：Buffer.alloc(size[, fill[, encoding]])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_allocunsafe_size">类方法：Buffer.allocUnsafe(size)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_allocunsafeslow_size">类方法：Buffer.allocUnsafeSlow(size)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_bytelength_string_encoding">类方法：Buffer.byteLength(string[, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_compare_buf1_buf2">类方法：Buffer.compare(buf1, buf2)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_concat_list_totallength">类方法：Buffer.concat(list[, totalLength])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_from_array">类方法：Buffer.from(array)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length">类方法：Buffer.from(arrayBuffer[, byteOffset[, length]])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_from_buffer">类方法：Buffer.from(buffer)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_from_string_encoding">类方法：Buffer.from(string[, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_from_object_offsetorencoding_length">Class Method: Buffer.from(object[, offsetOrEncoding[, length]])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_isbuffer_obj">类方法：Buffer.isBuffer(obj)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_method_buffer_isencoding_encoding">类方法：Buffer.isEncoding(encoding)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_class_property_buffer_poolsize">类属性：Buffer.poolSize</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_index">buf[index]</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_buffer">buf.buffer</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_compare_target_targetstart_targetend_sourcestart_sourceend">buf.compare(target[, targetStart[, targetEnd[, sourceStart[, sourceEnd]]]])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_copy_target_targetstart_sourcestart_sourceend">buf.copy(target[, targetStart[, sourceStart[, sourceEnd]]])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_entries">buf.entries()</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_equals_otherbuffer">buf.equals(otherBuffer)</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_fill_value_offset_end_encoding">buf.fill(value[, offset[, end]][, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_includes_value_byteoffset_encoding">buf.includes(value[, byteOffset][, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_indexof_value_byteoffset_encoding">buf.indexOf(value[, byteOffset][, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_keys">buf.keys()</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_lastindexof_value_byteoffset_encoding">buf.lastIndexOf(value[, byteOffset][, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_length">buf.length</a></span></li>
<li><span class="stability_0"><a href="buffer.html#buffer_buf_parent">buf.parent</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readdoublebe_offset_noassert">buf.readDoubleBE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readdoublele_offset_noassert">buf.readDoubleLE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readfloatbe_offset_noassert">buf.readFloatBE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readfloatle_offset_noassert">buf.readFloatLE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readint8_offset_noassert">buf.readInt8(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readint16be_offset_noassert">buf.readInt16BE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readint16le_offset_noassert">buf.readInt16LE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readint32be_offset_noassert">buf.readInt32BE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readint32le_offset_noassert">buf.readInt32LE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readintbe_offset_bytelength_noassert">buf.readIntBE(offset, byteLength[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readintle_offset_bytelength_noassert">buf.readIntLE(offset, byteLength[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readuint8_offset_noassert">buf.readUInt8(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readuint16be_offset_noassert">buf.readUInt16BE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readuint16le_offset_noassert">buf.readUInt16LE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readuint32be_offset_noassert">buf.readUInt32BE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readuint32le_offset_noassert">buf.readUInt32LE(offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readuintbe_offset_bytelength_noassert">buf.readUIntBE(offset, byteLength[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_readuintle_offset_bytelength_noassert">buf.readUIntLE(offset, byteLength[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_slice_start_end">buf.slice([start[, end]])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_swap16">buf.swap16()</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_swap32">buf.swap32()</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_swap64">buf.swap64()</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_tojson">buf.toJSON()</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_tostring_encoding_start_end">buf.toString([encoding[, start[, end]]])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_values">buf.values()</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_write_string_offset_length_encoding">buf.write(string[, offset[, length]][, encoding])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writedoublebe_value_offset_noassert">buf.writeDoubleBE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writedoublele_value_offset_noassert">buf.writeDoubleLE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writefloatbe_value_offset_noassert">buf.writeFloatBE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writefloatle_value_offset_noassert">buf.writeFloatLE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeint8_value_offset_noassert">buf.writeInt8(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeint16be_value_offset_noassert">buf.writeInt16BE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeint16le_value_offset_noassert">buf.writeInt16LE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeint32be_value_offset_noassert">buf.writeInt32BE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeint32le_value_offset_noassert">buf.writeInt32LE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeintbe_value_offset_bytelength_noassert">buf.writeIntBE(value, offset, byteLength[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeintle_value_offset_bytelength_noassert">buf.writeIntLE(value, offset, byteLength[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeuint8_value_offset_noassert">buf.writeUInt8(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeuint16be_value_offset_noassert">buf.writeUInt16BE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeuint16le_value_offset_noassert">buf.writeUInt16LE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeuint32be_value_offset_noassert">buf.writeUInt32BE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeuint32le_value_offset_noassert">buf.writeUInt32LE(value, offset[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeuintbe_value_offset_bytelength_noassert">buf.writeUIntBE(value, offset, byteLength[, noAssert])</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buf_writeuintle_value_offset_bytelength_noassert">buf.writeUIntLE(value, offset, byteLength[, noAssert])</a></span></li>
</ul>
</li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffer_inspect_max_bytes">buffer.INSPECT_MAX_BYTES</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffer_kmaxlength">buffer.kMaxLength</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffer_transcode_source_fromenc_toenc">buffer.transcode(source, fromEnc, toEnc)</a></span></li>
<li><span class="stability_0"><a href="buffer.html#buffer_class_slowbuffer">SlowBuffer 类</a></span><ul>
<li><span class="stability_0"><a href="buffer.html#buffer_new_slowbuffer_size">new SlowBuffer(size)</a></span></li>
</ul>
</li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffer_constants">Buffer Constants</a></span><ul>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffer_constants_max_length">buffer.constants.MAX_LENGTH</a></span></li>
<li><span class="stability_undefined"><a href="buffer.html#buffer_buffer_constants_max_string_length">buffer.constants.MAX_STRING_LENGTH</a></span></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>

      <div id="apicontent">
        <h1>Buffer (缓冲)<span><a class="mark" href="buffer.html#buffer_buffer" id="buffer_buffer">#</a></span></h1><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer.md">编辑中文md文件</a></p>
<!--introduced_in=v0.10.0-->
<div class="api_stability api_stability_2"><a href="documentation.html#documentation_stability_index">稳定性: 2</a> - 稳定的</div><p>在 ECMAScript 2015 (ES6) 引入 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 之前，JavaScript 语言没有读取或操作二进制数据流的机制。
<code>Buffer</code> 类被引入作为 Node.js API 的一部分，使其可以在 TCP 流或文件系统操作等场景中处理二进制数据流。</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 现已被添加进 ES6 中，<code>Buffer</code> 类以一种更优化、更适合 Node.js 用例的方式实现了 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a> API。</p>
<p><code>Buffer</code> 类的实例类似于整数数组，但 <code>Buffer</code> 的大小是固定的、且在 V8 堆外分配物理内存。
<code>Buffer</code> 的大小在被创建时确定，且无法调整。</p>
<p><code>Buffer</code> 类在 Node.js 中是一个全局变量，因此无需使用 <code>require('buffer').Buffer</code>。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_comment">// 创建一个长度为 10、且用 0 填充的 Buffer。</span>
<span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 创建一个长度为 10、且用 0x1 填充的 Buffer。 </span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 创建一个长度为 10、且未初始化的 Buffer。</span>
<span class="sh_comment">// 这个方法比调用 Buffer.alloc() 更快，</span>
<span class="sh_comment">// 但返回的 Buffer 实例可能包含旧数据，</span>
<span class="sh_comment">// 因此需要使用 fill() 或 write() 重写。</span>
<span class="sh_keyword">const</span> buf3 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 创建一个包含 [0x1, 0x2, 0x3] 的 Buffer。</span>
<span class="sh_keyword">const</span> buf4 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 创建一个包含 UTF-8 字节 [0x74, 0xc3, 0xa9, 0x73, 0x74] 的 Buffer。</span>
<span class="sh_keyword">const</span> buf5 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'tést'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 创建一个包含 Latin-1 字节 [0x74, 0xe9, 0x73, 0x74] 的 Buffer。</span>
<span class="sh_keyword">const</span> buf6 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'tést'</span><span class="sh_symbol">,</span> <span class="sh_string">'latin1'</span><span class="sh_symbol">);</span>
</code></pre>
<h2><code>Buffer.from()</code>, <code>Buffer.alloc()</code>, and <code>Buffer.allocUnsafe()</code><span><a class="mark" href="buffer.html#buffer_buffer_from_buffer_alloc_and_buffer_allocunsafe" id="buffer_buffer_from_buffer_alloc_and_buffer_allocunsafe">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer_from_buffer_alloc_and_buffer_allocunsafe">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer_from_buffer_alloc_and_buffer_allocunsafe.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer_from_buffer_alloc_and_buffer_allocunsafe.md">编辑中文md文件</a></p>
<p>在 Node.js v6 之前的版本中，<code>Buffer</code> 实例是通过 <code>Buffer</code> 构造函数创建的，它根据提供的参数返回不同的 <code>Buffer</code>：</p>
<ul>
<li>传一个数值作为第一个参数给 <code>Buffer()</code>（如 <code>new Buffer(10)</code>），则分配一个指定大小的新建的 <code>Buffer</code> 对象。
在 Node.js 8.0.0 之前，分配给这种 <code>Buffer</code> 实例的内存是<strong>没有</strong>初始化的，且<strong>可能包含敏感数据</strong>。
这种 <code>Buffer</code> 实例随后必须被初始化，可以使用 <a href="buffer.html#buffer_buf_fill_value_offset_end_encoding"><code>buf.fill(0)</code></a> 或写满这个 <code>Buffer</code>。
虽然这种行为是为了提高性能而<strong>有意为之的</strong>，但开发经验表明，创建一个快速但未初始化的 <code>Buffer</code> 与创建一个慢点但更安全的 <code>Buffer</code> 之间需要有更明确的区分。从 Node.js 8.0.0 开始， <code>Buffer(num)</code> 和 <code>new Buffer(num)</code> 将返回一个初始化内存之后的 <code>Buffer</code>。</li>
<li>传一个字符串、数组、或 <code>Buffer</code> 作为第一个参数，则将所传对象的数据拷贝到 <code>Buffer</code> 中。</li>
<li>传入一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a>，则返回一个与给定的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> 共享所分配内存的 <code>Buffer</code>。</li>
</ul>
<p>因为 <code>new Buffer()</code> 的行为会根据所传入的第一个参数的值的数据类型而明显地改变，所以如果应用程序没有正确地校验传给 <code>new Buffer()</code> 的参数、或未能正确地初始化新分配的 <code>Buffer</code> 的内容，就有可能在无意中为他们的代码引入安全性与可靠性问题。</p>
<p>为了使 <code>Buffer</code> 实例的创建更可靠、更不容易出错，各种 <code>new Buffer()</code> 构造函数已被 <strong>废弃</strong>，并由 <code>Buffer.from()</code>、<a href="buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding"><code>Buffer.alloc()</code></a>、和 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 方法替代。</p>
<p><strong>开发者们应当把所有正在使用的 <code>new Buffer()</code> 构造函数迁移到这些新的 API 上。</strong></p>
<ul>
<li><a href="buffer.html#buffer_class_method_buffer_from_array"><code>Buffer.from(array)</code></a> 返回一个新建的包含所提供的字节数组的副本的 <code>Buffer</code>。</li>
<li><a href="buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length"><code>Buffer.from(arrayBuffer[, byteOffset [, length]])</code></a> 返回一个新建的与给定的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> 共享同一内存的 <code>Buffer</code>。</li>
<li><a href="buffer.html#buffer_class_method_buffer_from_buffer"><code>Buffer.from(buffer)</code></a> 返回一个新建的包含所提供的 <code>Buffer</code> 的内容的副本的 <code>Buffer</code>。</li>
<li><a href="buffer.html#buffer_class_method_buffer_from_string_encoding"><code>Buffer.from(string[, encoding])</code></a> 返回一个新建的包含所提供的字符串的副本的 <code>Buffer</code>。</li>
<li><a href="buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding"><code>Buffer.alloc(size[, fill[, encoding]])</code></a> 返回一个指定大小的被填满的 <code>Buffer</code> 实例。
这个方法会明显地比 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe(size)</code></a> 慢，但可确保新创建的 <code>Buffer</code> 实例绝不会包含旧的和潜在的敏感数据。</li>
<li><a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe(size)</code></a> 与 <a href="buffer.html#buffer_class_method_buffer_allocunsafeslow_size"><code>Buffer.allocUnsafeSlow(size)</code></a> 返回一个新建的指定 <code>size</code> 的 <code>Buffer</code>，但它的内容<strong>必须</strong>被初始化，可以使用 <a href="buffer.html#buffer_buf_fill_value_offset_end_encoding"><code>buf.fill(0)</code></a> 或完全写满。</li>
</ul>
<p>如果 <code>size</code> 小于或等于 <a href="buffer.html#buffer_class_property_buffer_poolsize"><code>Buffer.poolSize</code></a> 的一半，则 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 返回的 <code>Buffer</code> 实例<strong>可能</strong>会被分配进一个共享的内部内存池。</p>
<h3><code>--zero-fill-buffers</code> 命令行选项<span><a class="mark" href="buffer.html#buffer_the_zero_fill_buffers_command_line_option" id="buffer_the_zero_fill_buffers_command_line_option">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_the_zero_fill_buffers_command_line_option">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/the_zero_fill_buffers_command_line_option.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/the_zero_fill_buffers_command_line_option.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.10.0</span>
</div><p>Node.js 可以在一开始就使用 <code>--zero-fill-buffers</code> 命令行选项强制所有使用 <code>new Buffer(size)</code> 、<a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 、<a href="buffer.html#buffer_class_method_buffer_allocunsafeslow_size"><code>Buffer.allocUnsafeSlow()</code></a> 或 <code>new SlowBuffer(size)</code> 新分配的 <code>Buffer</code> 实例在创建时<strong>自动用 0 填充</strong>。
使用这个选项会<strong>改变</strong>这些方法的<strong>默认行为</strong>，且<strong>对性能有明显的影响</strong>。
建议只在需要强制新分配的 <code>Buffer</code> 实例不能包含潜在的敏感数据时才使用 <code>--zero-fill-buffers</code> 选项。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-txt">$ node <span class="sh_symbol">--</span>zero<span class="sh_symbol">-</span>fill<span class="sh_symbol">-</span>buffers
<span class="sh_symbol">&gt;</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">);</span>
<span class="sh_symbol">&lt;</span>Buffer <span class="sh_number">00</span> <span class="sh_number">00</span> <span class="sh_number">00</span> <span class="sh_number">00</span> <span class="sh_number">00</span><span class="sh_symbol">&gt;</span>
</code></pre>
<h3>是什么令 <code>Buffer.allocUnsafe()</code> 和 <code>Buffer.allocUnsafeSlow()</code> 不安全？<span><a class="mark" href="buffer.html#buffer_what_makes_buffer_allocunsafe_and_buffer_allocunsafeslow_unsafe" id="buffer_what_makes_buffer_allocunsafe_and_buffer_allocunsafeslow_unsafe">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_what_makes_buffer_allocunsafe_and_buffer_allocunsafeslow_unsafe">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/what_makes_buffer_allocunsafe_and_buffer_allocunsafeslow_unsafe.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/what_makes_buffer_allocunsafe_and_buffer_allocunsafeslow_unsafe.md">编辑中文md文件</a></p>
<p>当调用 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 和 <a href="buffer.html#buffer_class_method_buffer_allocunsafeslow_size"><code>Buffer.allocUnsafeSlow()</code></a> 时，被分配的内存段是<strong>未初始化的</strong>（没有用 0 填充）。
虽然这样的设计使得内存的分配非常快，但已分配的内存段可能包含潜在的敏感旧数据。
使用通过 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 创建的没有被<strong>完全</strong>重写内存的 <code>Buffer</code> ，在 <code>Buffer</code> 内存可读的情况下，可能泄露它的旧数据。</p>
<p>虽然使用 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 有明显的性能优势，但必须额外<strong>小心</strong>，以避免给应用程序引入安全漏洞。</p>
<h2>Buffer 与字符编码<span><a class="mark" href="buffer.html#buffer_buffers_and_character_encodings" id="buffer_buffers_and_character_encodings">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffers_and_character_encodings">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffers_and_character_encodings.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffers_and_character_encodings.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v6.4.0</td>
<td><p>Introduced <code>latin1</code> as an alias for <code>binary</code>.</p>
</td></tr>
<tr><td>v5.0.0</td>
<td><p>Removed the deprecated <code>raw</code> and <code>raws</code> encodings.</p>
</td></tr>
</tbody></table>
</details>
</div><p><code>Buffer</code> 实例一般用于表示编码字符的序列，比如 UTF-8 、 UCS2 、 Base64 、或十六进制编码的数据。
通过使用显式的字符编码，就可以在 <code>Buffer</code> 实例与普通的 JavaScript 字符串之间进行相互转换。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'hello world'</span><span class="sh_symbol">,</span> <span class="sh_string">'ascii'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出 68656c6c6f20776f726c64</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'hex'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出 aGVsbG8gd29ybGQ=</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'base64'</span><span class="sh_symbol">));</span>
</code></pre>
<p>Node.js 目前支持的字符编码包括：</p>
<ul>
<li><p><code>'ascii'</code> - 仅支持 7 位 ASCII 数据。如果设置去掉高位的话，这种编码是非常快的。</p>
</li>
<li><p><code>'utf8'</code> - 多字节编码的 Unicode 字符。许多网页和其他文档格式都使用 UTF-8 。</p>
</li>
<li><p><code>'utf16le'</code> - 2 或 4 个字节，小字节序编码的 Unicode 字符。支持代理对（U+10000 至 U+10FFFF）。</p>
</li>
<li><p><code>'ucs2'</code> - <code>'utf16le'</code> 的别名。</p>
</li>
<li><p><code>'base64'</code> - Base64 编码。当从字符串创建 <code>Buffer</code> 时，按照 <a href="https://tools.ietf.org/html/rfc4648#section-5">RFC4648 第 5 章</a>的规定，这种编码也将正确地接受“URL 与文件名安全字母表”。</p>
</li>
<li><p><code>'latin1'</code> - 一种把 <code>Buffer</code> 编码成一字节编码的字符串的方式（由 IANA 定义在 <a href="https://tools.ietf.org/html/rfc1345">RFC1345</a> 第 63 页，用作 Latin-1 补充块与 C0/C1 控制码）。</p>
</li>
<li><p><code>'binary'</code> - <code>'latin1'</code> 的别名。</p>
</li>
<li><p><code>'hex'</code> - 将每个字节编码为两个十六进制字符。</p>
</li>
</ul>
<p><strong>注意</strong>：现代浏览器遵循 <a href="https://encoding.spec.whatwg.org/">WHATWG 编码标准</a> 将 'latin1' 和 ISO-8859-1 别名为 win-1252。
这意味着当进行例如 <code>http.get()</code> 这样的操作时，如果返回的字符编码是 WHATWG 规范列表中的，则有可能服务器真的返回 win-1252 编码的数据，此时使用 <code>'latin1'</code> 字符编码可能会错误地解码数据。</p>
<h2>Buffer 与 TypedArray<span><a class="mark" href="buffer.html#buffer_buffers_and_typedarray" id="buffer_buffers_and_typedarray">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffers_and_typedarray">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffers_and_typedarray.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffers_and_typedarray.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v3.0.0</td>
<td><p>The <code>Buffer</code>s class now inherits from <code>Uint8Array</code>.</p>
</td></tr>
</tbody></table>
</details>
</div><p><code>Buffer</code> 实例也是 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a> 实例。
但是与 ECMAScript 2015 中的 TypedArray 规范还是有些微妙的不同。
例如，当 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/slice"><code>ArrayBuffer#slice()</code></a> 创建一个切片的副本时，<a href="buffer.html#buffer_buf_slice_start_end"><code>Buffer#slice()</code></a> 的实现是在现有的 <code>Buffer</code> 上不经过拷贝直接进行创建，这也使得 <a href="buffer.html#buffer_buf_slice_start_end"><code>Buffer#slice()</code></a> 更高效。</p>
<p>遵循以下注意事项，也可以从一个 <code>Buffer</code> 创建一个新的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 实例：</p>
<ol>
<li><p><code>Buffer</code> 对象的内存是拷贝到 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 的，而不是共享的。</p>
</li>
<li><p><code>Buffer</code> 对象的内存是被解析为一个明确元素的数组，而不是一个目标类型的字节数组。
也就是说，<code>new Uint32Array(Buffer.from([1, 2, 3, 4]))</code> 会创建一个包含 <code>[1, 2, 3, 4]</code> 四个元素的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array"><code>Uint32Array</code></a>，而不是一个只包含一个元素 <code>[0x1020304]</code> 或 <code>[0x4030201]</code> 的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array"><code>Uint32Array</code></a> 。</p>
</li>
</ol>
<p>也可以通过 TypeArray 对象的 <code>.buffer</code> 属性创建一个新建的且与 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 实例共享同一分配内存的 <code>Buffer</code> 。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> arr <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Uint16Array</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">);</span>

arr<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">5000</span><span class="sh_symbol">;</span>
arr<span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">4000</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 拷贝 `arr` 的内容</span>
<span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>arr<span class="sh_symbol">);</span>

<span class="sh_comment">// 与 `arr` 共享内存</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>arr<span class="sh_symbol">.</span>buffer<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 a0&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 13 a0 0f&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">);</span>

arr<span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">6000</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 a0&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 13 70 17&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">);</span>
</code></pre>
<p>注意，当使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 的 <code>.buffer</code> 创建 <code>Buffer</code> 时，也可以通过传入 <code>byteOffset</code> 和 <code>length</code> 参数只使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> 的一部分。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> arr <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Uint16Array</span><span class="sh_symbol">(</span><span class="sh_number">20</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>arr<span class="sh_symbol">.</span>buffer<span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">16</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 16</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>
</code></pre>
<p><code>Buffer.from()</code> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/from"><code>TypedArray.from()</code></a> 有着不同的签名与实现。
具体而言，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 的变种接受第二个参数，在类型数组的每个元素上调用一次映射函数：</p>
<ul>
<li><code>TypedArray.from(source[, mapFn[, thisArg]])</code></li>
</ul>
<p><code>Buffer.from()</code> 方法不支持使用映射函数：</p>
<ul>
<li><a href="buffer.html#buffer_class_method_buffer_from_array"><code>Buffer.from(array)</code></a></li>
<li><a href="buffer.html#buffer_class_method_buffer_from_buffer"><code>Buffer.from(buffer)</code></a></li>
<li><a href="buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length"><code>Buffer.from(arrayBuffer[, byteOffset [, length]])</code></a></li>
<li><a href="buffer.html#buffer_class_method_buffer_from_string_encoding"><code>Buffer.from(string[, encoding])</code></a></li>
</ul>
<h2>Buffer 与 ES6 迭代器<span><a class="mark" href="buffer.html#buffer_buffers_and_es6_iteration" id="buffer_buffers_and_es6_iteration">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffers_and_es6_iteration">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffers_and_es6_iteration.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffers_and_es6_iteration.md">编辑中文md文件</a></p>
<p><code>Buffer</code> 实例可以使用 ECMAScript 2015 (ES6) 的 <code>for..of</code> 语法进行遍历。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出:</span>
<span class="sh_comment">//   1</span>
<span class="sh_comment">//   2</span>
<span class="sh_comment">//   3</span>
<span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> b of buf<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</code></pre>
<p>此外，<a href="buffer.html#buffer_buf_values"><code>buf.values()</code></a> 、<a href="buffer.html#buffer_buf_keys"><code>buf.keys()</code></a> 和 <a href="buffer.html#buffer_buf_entries"><code>buf.entries()</code></a> 方法可用于创建迭代器。</p>
<h2>Buffer 类<span><a class="mark" href="buffer.html#buffer_class_buffer" id="buffer_class_buffer">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_buffer">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_buffer.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_buffer.md">编辑中文md文件</a></p>
<p><code>Buffer</code> 类是一个全局变量类型，用来直接处理二进制数据的。
它能够使用多种方式构建。</p>
<h3>new Buffer(array)<span><a class="mark" href="buffer.html#buffer_new_buffer_array" id="buffer_new_buffer_array">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_new_buffer_array">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/new_buffer_array.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/new_buffer_array.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.2.1</td>
<td><p>Calling this constructor no longer emits a deprecation warning.</p>
</td></tr>
<tr><td>v7.0.0</td>
<td><p>Calling this constructor emits a deprecation warning now.</p>
</td></tr>
<tr><td>v6.0.0</td>
<td><p><span>废弃于: v6.0.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">稳定性: 0</a> - 废弃的: 使用 <a href="buffer.html#buffer_class_method_buffer_from_array"><code>Buffer.from(array)</code></a> 代替。</div><ul>
<li><code>array</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer[]&gt;</a> 要从中复制的字节数组。</li>
</ul>
<p>使用八字节的 <code>array</code> 分配一个新的 <code>Buffer</code>。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_comment">// 创建一个新的包含字符串 'buffer' 的 UTF-8 编码的 Buffer</span>
<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Buffer</span><span class="sh_symbol">([</span><span class="sh_number">0x62</span><span class="sh_symbol">,</span> <span class="sh_number">0x75</span><span class="sh_symbol">,</span> <span class="sh_number">0x66</span><span class="sh_symbol">,</span> <span class="sh_number">0x66</span><span class="sh_symbol">,</span> <span class="sh_number">0x65</span><span class="sh_symbol">,</span> <span class="sh_number">0x72</span><span class="sh_symbol">]);</span>
</code></pre>
<h3>new Buffer(arrayBuffer[, byteOffset [, length]])<span><a class="mark" href="buffer.html#buffer_new_buffer_arraybuffer_byteoffset_length" id="buffer_new_buffer_arraybuffer_byteoffset_length">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_new_buffer_arraybuffer_byteoffset_length">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/new_buffer_arraybuffer_byteoffset_length.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/new_buffer_arraybuffer_byteoffset_length.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.2.1</td>
<td><p>Calling this constructor no longer emits a deprecation warning.</p>
</td></tr>
<tr><td>v7.0.0</td>
<td><p>Calling this constructor emits a deprecation warning now.</p>
</td></tr>
<tr><td>v6.0.0</td>
<td><p>The <code>byteOffset</code> and <code>length</code> parameters are supported now.</p>
</td></tr>
<tr><td>v6.0.0</td>
<td><p><span>废弃于: v6.0.0</span></p>
</td></tr>
<tr><td>v3.0.0</td>
<td><p><span>新增于: v3.0.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">稳定性: 0</a> - 废弃的: 使用 <a href="buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length"><code>Buffer.from(arrayBuffer[, byteOffset [, length]])</code></a> 代替。</div><ul>
<li><code>arrayBuffer</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" class="type">&lt;ArrayBuffer&gt;</a> 一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a>，或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 的 <code>.buffer</code> 属性</li>
<li><code>byteOffset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始拷贝的索引。 <strong>默认：</strong> <code>0</code></li>
<li><code>length</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 拷贝的字节数。<strong>默认：</strong> <code>arrayBuffer.length - byteOffset</code></li>
</ul>
<p>该方法将创建一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> 的视图，而不会复制底层内存。例如，当传入一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 实例的 <code>.buffer</code> 属性的引用时，这个新建的 <code>Buffer</code> 会像 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 那样共享同一段分配的内存。</p>
<p>可选的 <code>byteOffset</code> 和 <code>length</code> 参数指定将与 <code>Buffer</code> 共享的 <code>arrayBuffer</code> 的内存范围。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> arr <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Uint16Array</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">);</span>

arr<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">5000</span><span class="sh_symbol">;</span>
arr<span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">4000</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 与 `arr` 共享内存</span>
<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Buffer</span><span class="sh_symbol">(</span>arr<span class="sh_symbol">.</span>buffer<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 13 a0 0f&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

<span class="sh_comment">// 改变原始的 Uint16Array 也将改变 Buffer</span>
arr<span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">6000</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 13 70 17&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>new Buffer(buffer)<span><a class="mark" href="buffer.html#buffer_new_buffer_buffer" id="buffer_new_buffer_buffer">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_new_buffer_buffer">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/new_buffer_buffer.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/new_buffer_buffer.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.2.1</td>
<td><p>Calling this constructor no longer emits a deprecation warning.</p>
</td></tr>
<tr><td>v7.0.0</td>
<td><p>Calling this constructor emits a deprecation warning now.</p>
</td></tr>
<tr><td>v6.0.0</td>
<td><p><span>废弃于: v6.0.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">稳定性: 0</a> - 废弃的: 使用 <a href="buffer.html#buffer_class_method_buffer_from_buffer"><code>Buffer.from(buffer)</code></a> 代替。</div><ul>
<li><code>buffer</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> 一个要拷贝数据的已存在的 <code>Buffer</code></li>
</ul>
<p>将传入的 <code>buffer</code> 数据拷贝到一个新建的 <code>Buffer</code> 实例。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Buffer</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Buffer</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>

buf1<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">0x61</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: auffer</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>

<span class="sh_comment">// Prints: buffer</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
</code></pre>
<h3>new Buffer(size)<span><a class="mark" href="buffer.html#buffer_new_buffer_size" id="buffer_new_buffer_size">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_new_buffer_size">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/new_buffer_size.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/new_buffer_size.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>new Buffer(size) will return zero-filled memory by default.</p>
</td></tr>
<tr><td>v7.2.1</td>
<td><p>Calling this constructor no longer emits a deprecation warning.</p>
</td></tr>
<tr><td>v7.0.0</td>
<td><p>Calling this constructor emits a deprecation warning now.</p>
</td></tr>
<tr><td>v6.0.0</td>
<td><p><span>废弃于: v6.0.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">稳定性: 0</a> - 废弃的: 使用 <a href="buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding"><code>Buffer.alloc()</code></a> 代替（或 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a>）。</div><ul>
<li><code>size</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 新建的 <code>Buffer</code> 期望的长度</li>
</ul>
<p>分配一个大小为 <code>size</code> 字节的新建的 <code>Buffer</code>。如果 <code>size</code> 大于 <a href="buffer.html#buffer_buffer_constants_max_length"><code>buffer.constants.MAX_LENGTH</code></a> 或小于 0，则抛出 <a href="errors.html#errors_class_rangeerror"><code>RangeError</code></a> 错误。如果 <code>size</code> 为 0，则创建一个长度为 0 的 <code>Buffer</code>。</p>
<p>在 Node.js 8.0.0 之前，以这种方式创建的 <code>Buffer</code> 实例的底层内存是 <em>未初始化</em> 的。新建的 <code>Buffer</code> 的内容是未知的并且 <em>可能包含敏感数据</em>。使用 <a href="buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding"><code>Buffer.alloc(size)</code></a> 代替它去初始化 <code>Buffer</code> 为 0。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Buffer</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>new Buffer(string[, encoding])<span><a class="mark" href="buffer.html#buffer_new_buffer_string_encoding" id="buffer_new_buffer_string_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_new_buffer_string_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/new_buffer_string_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/new_buffer_string_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.2.1</td>
<td><p>Calling this constructor no longer emits a deprecation warning.</p>
</td></tr>
<tr><td>v7.0.0</td>
<td><p>Calling this constructor emits a deprecation warning now.</p>
</td></tr>
<tr><td>v6.0.0</td>
<td><p><span>废弃于: v6.0.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">稳定性: 0</a> - 废弃的: 使用 <a href="buffer.html#buffer_class_method_buffer_from_string_encoding"><code>Buffer.from(string[, encoding])</code></a> 代替。</div><ul>
<li><code>string</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 要编码的字符串</li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> <code>string</code> 的字符串编码。 <strong>默认：</strong> <code>'utf8'</code></li>
</ul>
<p>创建一个包含给定字符串 <code>string</code> 的 <code>Buffer</code>。<code>encoding</code> 参数制定 <code>string</code> 的字符串编码。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Buffer</span><span class="sh_symbol">(</span><span class="sh_string">'this is a tést'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: this is a tést</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: this is a tC)st</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">));</span>


<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Buffer</span><span class="sh_symbol">(</span><span class="sh_string">'7468697320697320612074c3a97374'</span><span class="sh_symbol">,</span> <span class="sh_string">'hex'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: this is a tést</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
</code></pre>
<h3>类方法：Buffer.alloc(size[, fill[, encoding]])<span><a class="mark" href="buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding" id="buffer_class_method_buffer_alloc_size_fill_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_alloc_size_fill_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_alloc_size_fill_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.9.3</td>
<td><p>Specifying an invalid string for <code>fill</code> now results in a zero-filled buffer.</p>
</td></tr>
<tr><td>v5.10.0</td>
<td><p><span>新增于: v5.10.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>size</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 新建的 <code>Buffer</code> 期望的长度</li>
<li><code>fill</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 用来预填充新建的 <code>Buffer</code> 的值。
<strong>默认:</strong> <code>0</code></li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 如果 <code>fill</code> 是字符串，则该值是它的字符编码。
<strong>默认:</strong> <code>'utf8'</code></li>
</ul>
<p>分配一个大小为 <code>size</code> 字节的新建的 <code>Buffer</code> 。
如果 <code>fill</code> 为 <code>undefined</code> ，则该 <code>Buffer</code> 会用 <strong>0 填充</strong>。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 00 00 00 00 00&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<p>分配一个大小为 <code>size</code> 字节的新建的 <code>Buffer</code> 。
如果 <code>size</code> 大于 <a href="buffer.html#buffer_buffer_constants_max_length"><code>buffer.constants.MAX_LENGTH</code></a> 或小于 0，则抛出 <a href="errors.html#errors_class_rangeerror"><code>RangeError</code></a> 错误。
如果 <code>size</code> 为 0，则创建一个长度为 0 的 <code>Buffer</code>。</p>
<p>如果指定了 <code>fill</code> ，则会调用 <a href="buffer.html#buffer_buf_fill_value_offset_end_encoding"><code>buf.fill(fill)</code></a> 初始化分配的 <code>Buffer</code> 。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_string">'a'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 61 61 61 61 61&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<p>如果同时指定了 <code>fill</code> 和 <code>encoding</code> ，则会调用 <a href="buffer.html#buffer_buf_fill_value_offset_end_encoding"><code>buf.fill(fill, encoding)</code></a> 初始化分配的 <code>Buffer</code> 。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">11</span><span class="sh_symbol">,</span> <span class="sh_string">'aGVsbG8gd29ybGQ='</span><span class="sh_symbol">,</span> <span class="sh_string">'base64'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 68 65 6c 6c 6f 20 77 6f 72 6c 64&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<p>调用 <a href="buffer.html#buffer_class_method_buffer_alloc_size_fill_encoding"><code>Buffer.alloc()</code></a> 会明显地比另一个方法 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 慢，但是能确保新建的 <code>Buffer</code> 实例的内容<strong>不会包含敏感数据</strong>。</p>
<p>如果 <code>size</code> 不是一个数值，则抛出 <code>TypeError</code> 错误。</p>
<h3>类方法：Buffer.allocUnsafe(size)<span><a class="mark" href="buffer.html#buffer_class_method_buffer_allocunsafe_size" id="buffer_class_method_buffer_allocunsafe_size">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_allocunsafe_size">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_allocunsafe_size.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_allocunsafe_size.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.0.0</td>
<td><p>Passing a negative <code>size</code> will now throw an error.</p>
</td></tr>
<tr><td>v5.10.0</td>
<td><p><span>新增于: v5.10.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>size</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 新建的 <code>Buffer</code> 期望的长度</li>
</ul>
<p>分配一个大小为 <code>size</code> 字节的新建的 <code>Buffer</code> 。
如果 <code>size</code> 大于 <a href="buffer.html#buffer_buffer_constants_max_length"><code>buffer.constants.MAX_LENGTH</code></a> 或小于 0，则抛出 <a href="errors.html#errors_class_rangeerror"><code>RangeError</code></a> 错误。
如果 <code>size</code> 为 0，则创建一个长度为 0 的 <code>Buffer</code>。</p>
<p>以这种方式创建的 <code>Buffer</code> 实例的底层内存是<strong>未初始化</strong>的。
新创建的 <code>Buffer</code> 的内容是未知的，且<strong>可能包含敏感数据</strong>。
可以使用 <a href="buffer.html#buffer_buf_fill_value_offset_end_encoding"><code>buf.fill(0)</code></a> 初始化 <code>Buffer</code> 实例为0。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: (内容可能不同): &lt;Buffer a0 8b 28 3f 01 00 00 00 50 32&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<p>如果 <code>size</code> 不是一个数值，则抛出 <code>TypeError</code> 错误。</p>
<p>注意，<code>Buffer</code> 模块会预分配一个大小为 <a href="buffer.html#buffer_class_property_buffer_poolsize"><code>Buffer.poolSize</code></a> 的内部 <code>Buffer</code> 实例作为快速分配池，
用于使用 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 新创建的 <code>Buffer</code> 实例，以及废弃的 <code>new Buffer(size)</code> 构造器，
仅限于当 <code>size</code> 小于或等于 <code>Buffer.poolSize &gt;&gt; 1</code> （<a href="buffer.html#buffer_class_property_buffer_poolsize"><code>Buffer.poolSize</code></a> 除以2后的最大整数值）。</p>
<p>对这个预分配的内部内存池的使用，是调用 <code>Buffer.alloc(size, fill)</code> 和 <code>Buffer.allocUnsafe(size).fill(fill)</code> 的关键区别。
具体地说，<code>Buffer.alloc(size, fill)</code> <strong>永远不会</strong>使用这个内部的 <code>Buffer</code> 池，但如果 <code>size</code> 小于或等于 <a href="buffer.html#buffer_class_property_buffer_poolsize"><code>Buffer.poolSize</code></a> 的一半， <code>Buffer.allocUnsafe(size).fill(fill)</code> <strong>会</strong>使用这个内部的 <code>Buffer</code> 池。
当应用程序需要 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 提供额外的性能时，这个细微的区别是非常重要的。</p>
<h3>类方法：Buffer.allocUnsafeSlow(size)<span><a class="mark" href="buffer.html#buffer_class_method_buffer_allocunsafeslow_size" id="buffer_class_method_buffer_allocunsafeslow_size">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_allocunsafeslow_size">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_allocunsafeslow_size.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_allocunsafeslow_size.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.12.0</span>
</div><ul>
<li><code>size</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 新建的 <code>Buffer</code> 期望的长度</li>
</ul>
<p>分配一个大小为 <code>size</code> 字节的新建的 <code>Buffer</code> 。
如果 <code>size</code> 大于 <a href="buffer.html#buffer_buffer_constants_max_length"><code>buffer.constants.MAX_LENGTH</code></a> 或小于 0，则抛出 <a href="errors.html#errors_class_rangeerror"><code>RangeError</code></a> 错误。
如果 <code>size</code> 为 0，则创建一个长度为 0 的 <code>Buffer</code>。</p>
<p>以这种方式创建的 <code>Buffer</code> 实例的底层内存是<strong>未初始化</strong>的。
新创建的 <code>Buffer</code> 的内容是未知的，且<strong>可能包含敏感数据</strong>。
可以使用 <a href="buffer.html#buffer_buf_fill_value_offset_end_encoding"><code>buf.fill(0)</code></a> 初始化 <code>Buffer</code> 实例为0。</p>
<p>当使用 <a href="buffer.html#buffer_class_method_buffer_allocunsafe_size"><code>Buffer.allocUnsafe()</code></a> 分配新建的 <code>Buffer</code> 时，当分配的内存小于 4KB 时，默认会从一个单一的预分配的 <code>Buffer</code> 切割出来。
这使得应用程序可以避免垃圾回收机制因创建太多独立分配的 <code>Buffer</code> 实例而过度使用。
这个方法通过像大多数持久对象一样消除追踪与清理的需求，改善了性能与内存使用。</p>
<p>当然，在开发者可能需要在不确定的时间段从内存池保留一小块内存的情况下，使用 <code>Buffer.allocUnsafeSlow()</code> 创建一个非池的 <code>Buffer</code> 实例然后拷贝出相关的位元是合适的做法。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_comment">// 需要保留一小块内存块</span>
<span class="sh_keyword">const</span> store <span class="sh_symbol">=</span> <span class="sh_symbol">[];</span>

socket<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'readable'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_keyword">const</span> data <span class="sh_symbol">=</span> socket<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">();</span>

  <span class="sh_comment">// 为保留的数据分配内存</span>
  <span class="sh_keyword">const</span> sb <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafeSlow</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

  <span class="sh_comment">// 拷贝数据进新分配的内存</span>
  data<span class="sh_symbol">.</span><span class="sh_function">copy</span><span class="sh_symbol">(</span>sb<span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">10</span><span class="sh_symbol">);</span>

  store<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span>sb<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p><code>Buffer.allocUnsafeSlow()</code> 应当仅仅作为开发者已经在他们的应用程序中观察到过度的内存保留之后的终极手段使用。</p>
<p>如果 <code>size</code> 不是一个数值，则抛出 <code>TypeError</code> 错误。</p>
<h3>类方法：Buffer.byteLength(string[, encoding])<span><a class="mark" href="buffer.html#buffer_class_method_buffer_bytelength_string_encoding" id="buffer_class_method_buffer_bytelength_string_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_bytelength_string_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_bytelength_string_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_bytelength_string_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.0.0</td>
<td><p>Passing invalid input will now throw an error.</p>
</td></tr>
<tr><td>v5.10.0</td>
<td><p>The <code>string</code> parameter can now be any <code>TypedArray</code>, <code>DataView</code> or <code>ArrayBuffer</code>.</p>
</td></tr>
<tr><td>v0.1.90</td>
<td><p><span>新增于: v0.1.90</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>string</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" class="type">&lt;TypedArray&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" class="type">&lt;DataView&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" class="type">&lt;ArrayBuffer&gt;</a> 要计算长度的值</li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 如果 <code>string</code> 是字符串，则这是它的字符编码。
<strong>默认:</strong> <code>'utf8'</code></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>string</code> 包含的字节数</li>
</ul>
<p>返回一个字符串的实际字节长度。
这与 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/length"><code>String.prototype.length</code></a> 不同，因为那返回字符串的<strong>字符</strong>数。</p>
<p><em>注意</em> 对于 <code>'base64'</code> 和 <code>'hex'</code>， 该函数假定有效的输入。 对于包含 non-Base64/Hex-encoded 数据的字符串 (e.g. 空格)， 返回值可能大于
从字符串中创建的 <code>Buffer</code> 的长度。 </p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> str <span class="sh_symbol">=</span> <span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">00bd + </span><span class="sh_specialchar">\u</span><span class="sh_string">00bc = </span><span class="sh_specialchar">\u</span><span class="sh_string">00be'</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: ½ + ¼ = ¾: 9 个字符, 12 个字节</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`$<span class="sh_cbracket">{</span>str<span class="sh_cbracket">}</span><span class="sh_symbol">:</span> $<span class="sh_cbracket">{</span>str<span class="sh_symbol">.</span>length<span class="sh_cbracket">}</span> 个字符<span class="sh_symbol">,</span> ` <span class="sh_symbol">+</span>
            `$<span class="sh_cbracket">{</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">byteLength</span><span class="sh_symbol">(</span>str<span class="sh_symbol">,</span> <span class="sh_string">'utf8'</span><span class="sh_symbol">)</span><span class="sh_cbracket">}</span> 个字节`<span class="sh_symbol">);</span>
</code></pre>
<p>当 <code>string</code> 是一个 <code>Buffer</code>/<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView"><code>DataView</code></a>/<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a>/<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> 时，返回实际的字节长度。</p>
<h3>类方法：Buffer.compare(buf1, buf2)<span><a class="mark" href="buffer.html#buffer_class_method_buffer_compare_buf1_buf2" id="buffer_class_method_buffer_compare_buf1_buf2">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_compare_buf1_buf2">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_compare_buf1_buf2.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_compare_buf1_buf2.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>The arguments can now be <code>Uint8Array</code>s.</p>
</td></tr>
<tr><td>v0.11.13</td>
<td><p><span>新增于: v0.11.13</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>buf1</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a></li>
<li><code>buf2</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a></li>
<li>Returns: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>比较 <code>buf1</code> 和 <code>buf2</code> ，通常用于 <code>Buffer</code> 实例数组的排序。
相当于调用 <a href="buffer.html#buffer_buf_compare_target_targetstart_targetend_sourcestart_sourceend"><code>buf1.compare(buf2)</code></a> 。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'1234'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'0123'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> arr <span class="sh_symbol">=</span> <span class="sh_symbol">[</span>buf1<span class="sh_symbol">,</span> buf2<span class="sh_symbol">];</span>

<span class="sh_comment">// 输出: [ &lt;Buffer 30 31 32 33&gt;, &lt;Buffer 31 32 33 34&gt; ]</span>
<span class="sh_comment">// (结果相当于: [buf2, buf1])</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>arr<span class="sh_symbol">.</span><span class="sh_function">sort</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span>compare<span class="sh_symbol">));</span>
</code></pre>
<h3>类方法：Buffer.concat(list[, totalLength])<span><a class="mark" href="buffer.html#buffer_class_method_buffer_concat_list_totallength" id="buffer_class_method_buffer_concat_list_totallength">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_concat_list_totallength">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_concat_list_totallength.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_concat_list_totallength.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>The elements of <code>list</code> can now be <code>Uint8Array</code>s.</p>
</td></tr>
<tr><td>v0.7.11</td>
<td><p><span>新增于: v0.7.11</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>list</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" class="type">&lt;Array&gt;</a> 要合并的 <code>Buffer</code> 或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a> 实例的数组</li>
<li><code>totalLength</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 合并时 <code>list</code> 中 <code>Buffer</code> 实例的总长度</li>
<li>返回: 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>返回一个合并了 <code>list</code> 中所有 <code>Buffer</code> 实例的新建的 <code>Buffer</code> 。</p>
<p>如果 <code>list</code> 中没有元素、或 <code>totalLength</code> 为 0 ，则返回一个新建的长度为 0 的 <code>Buffer</code> 。</p>
<p>如果没有提供 <code>totalLength</code> ，则从 <code>list</code> 中的 <code>Buffer</code> 实例计算得到。
为了计算 <code>totalLength</code> 会导致需要执行额外的循环，所以提供明确的长度会运行更快。</p>
<p>如果提供了 <code>totalLength</code>，<code>totalLength</code> 必须是一个正整数。如果从 <code>list</code> 中计算得到的 <code>Buffer</code> 长度超过了 <code>totalLength</code>，则合并的结果将会被截断为 <code>totalLength</code> 的长度。</p>
<p>例子：从一个包含三个 <code>Buffer</code> 实例的数组创建为一个单一的 <code>Buffer</code>。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">14</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf3 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">18</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> totalLength <span class="sh_symbol">=</span> buf1<span class="sh_symbol">.</span>length <span class="sh_symbol">+</span> buf2<span class="sh_symbol">.</span>length <span class="sh_symbol">+</span> buf3<span class="sh_symbol">.</span>length<span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: 42</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>totalLength<span class="sh_symbol">);</span>

<span class="sh_keyword">const</span> bufA <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">concat</span><span class="sh_symbol">([</span>buf1<span class="sh_symbol">,</span> buf2<span class="sh_symbol">,</span> buf3<span class="sh_symbol">],</span> totalLength<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 00 00 00 00 ...&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>bufA<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 42</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>bufA<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>
</code></pre>
<h3>类方法：Buffer.from(array)<span><a class="mark" href="buffer.html#buffer_class_method_buffer_from_array" id="buffer_class_method_buffer_from_array">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_from_array">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_from_array.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_from_array.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.10.0</span>
</div><ul>
<li><code>array</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" class="type">&lt;Array&gt;</a></li>
</ul>
<p>通过一个八位字节的 <code>array</code> 创建一个新的 <code>Buffer</code> 。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_comment">// 创建一个新的包含字符串 'buffer' 的 UTF-8 字节的 Buffer</span>
<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x62</span><span class="sh_symbol">,</span> <span class="sh_number">0x75</span><span class="sh_symbol">,</span> <span class="sh_number">0x66</span><span class="sh_symbol">,</span> <span class="sh_number">0x66</span><span class="sh_symbol">,</span> <span class="sh_number">0x65</span><span class="sh_symbol">,</span> <span class="sh_number">0x72</span><span class="sh_symbol">]);</span>
</code></pre>
<p>如果 <code>array</code> 不是一个数组，则抛出 <code>TypeError</code> 错误。</p>
<h3>类方法：Buffer.from(arrayBuffer[, byteOffset[, length]])<span><a class="mark" href="buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length" id="buffer_class_method_buffer_from_arraybuffer_byteoffset_length">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_from_arraybuffer_byteoffset_length.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_from_arraybuffer_byteoffset_length.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.10.0</span>
</div><ul>
<li><code>arrayBuffer</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" class="type">&lt;ArrayBuffer&gt;</a> 一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a>，或一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 的 <code>.buffer</code> 属性。</li>
<li><code>byteOffset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始拷贝的索引。默认为 <code>0</code>。</li>
<li><code>length</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 拷贝的字节数。默认为 <code>arrayBuffer.length - byteOffset</code>。</li>
</ul>
<p>该方法将创建一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> 的视图，而不会复制底层内存。例如，当传入一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 实例的 <code>.buffer</code> 属性的引用时，这个新建的 <code>Buffer</code> 会像 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray"><code>TypedArray</code></a> 那样共享同一分配的内存。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> arr <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">Uint16Array</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">);</span>

arr<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">5000</span><span class="sh_symbol">;</span>
arr<span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">4000</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 与 `arr` 共享内存</span>
<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>arr<span class="sh_symbol">.</span>buffer<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 13 a0 0f&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

<span class="sh_comment">// 改变原始的 Uint16Array 也会改变 Buffer</span>
arr<span class="sh_symbol">[</span><span class="sh_number">1</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">6000</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: &lt;Buffer 88 13 70 17&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<p>可选的 <code>byteOffset</code> 和 <code>length</code> 参数指定将与 <code>Buffer</code> 共享的 <code>arrayBuffer</code> 的内存范围。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> ab <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ArrayBuffer</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>ab<span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 2</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>
</code></pre>
<p>如果 <code>arrayBuffer</code> 不是一个 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a>，则抛出 <code>TypeError</code> 错误。</p>
<h3>类方法：Buffer.from(buffer)<span><a class="mark" href="buffer.html#buffer_class_method_buffer_from_buffer" id="buffer_class_method_buffer_from_buffer">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_from_buffer">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_from_buffer.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_from_buffer.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.10.0</span>
</div><ul>
<li><code>buffer</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> 一个要拷贝数据的已存在的 <code>Buffer</code></li>
</ul>
<p>将传入的 <code>buffer</code> 数据拷贝到一个新建的 <code>Buffer</code> 实例。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>

buf1<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">0x61</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: auffer</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: buffer</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
</code></pre>
<p>如果 <code>buffer</code> 不是一个 <code>Buffer</code>，则抛出 <code>TypeError</code> 错误。</p>
<h3>类方法：Buffer.from(string[, encoding])<span><a class="mark" href="buffer.html#buffer_class_method_buffer_from_string_encoding" id="buffer_class_method_buffer_from_string_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_from_string_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_from_string_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_from_string_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.10.0</span>
</div><ul>
<li><code>string</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 要编码的字符串</li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> <code>string</code> 的字符编码。 <strong>默认:</strong> <code>'utf8'</code></li>
</ul>
<p>新建一个包含所给的 JavaScript 字符串 <code>string</code> 的 <code>Buffer</code> 。
<code>encoding</code> 参数指定 <code>string</code> 的字符编码。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'this is a tést'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: this is a tést</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: this is a tC)st</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">));</span>


<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'7468697320697320612074c3a97374'</span><span class="sh_symbol">,</span> <span class="sh_string">'hex'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: this is a tést</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
</code></pre>
<p>如果 <code>string</code> 不是一个字符串，则抛出 <code>TypeError</code> 错误。</p>
<h3>Class Method: Buffer.from(object[, offsetOrEncoding[, length]])<span><a class="mark" href="buffer.html#buffer_class_method_buffer_from_object_offsetorencoding_length" id="buffer_class_method_buffer_from_object_offsetorencoding_length">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_from_object_offsetorencoding_length">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_from_object_offsetorencoding_length.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_from_object_offsetorencoding_length.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v8.2.0</span>
</div><ul>
<li><code>object</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a> 一个支持 <code>Symbol.toPrimitive</code> 或 <code>valueOf()</code> 的对象</li>
<li><code>offsetOrEncoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 字节偏移量或编码，取决于 <code>object.valueOf()</code> 或 <code>object[Symbol.toPrimitive]()</code> 的返回值。</li>
<li><code>length</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> 长度值，取决于 <code>object.valueOf()</code> 或 <code>object[Symbol.toPrimitive]()</code> 的返回值。</li>
</ul>
<p>那些其 <code>valueOf()</code> 方法返回值如果不严格等于 <code>object</code> 的对象，返回<code>Buffer.from(object.valueOf(), offsetOrEncoding, length)</code>。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_predef_func">String</span><span class="sh_symbol">(</span><span class="sh_string">'this is a test'</span><span class="sh_symbol">));</span>
<span class="sh_comment">// &lt;Buffer 74 68 69 73 20 69 73 20 61 20 74 65 73 74&gt;</span>
</code></pre>
<p>那些支持 <code>Symbol.toPrimitive</code> 的对象， 返回 <code>Buffer.from(object[Symbol.toPrimitive](), offsetOrEncoding, length)</code>。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">class</span> Foo <span class="sh_cbracket">{</span>
  <span class="sh_symbol">[</span>Symbol<span class="sh_symbol">.</span>toPrimitive<span class="sh_symbol">]()</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">return</span> <span class="sh_string">'this is a test'</span><span class="sh_symbol">;</span>
  <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>

<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_keyword">new</span> <span class="sh_function">Foo</span><span class="sh_symbol">(),</span> <span class="sh_string">'utf8'</span><span class="sh_symbol">);</span>
<span class="sh_comment">// &lt;Buffer 74 68 69 73 20 69 73 20 61 20 74 65 73 74&gt;</span>
</code></pre>
<h3>类方法：Buffer.isBuffer(obj)<span><a class="mark" href="buffer.html#buffer_class_method_buffer_isbuffer_obj" id="buffer_class_method_buffer_isbuffer_obj">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_isbuffer_obj">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_isbuffer_obj.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_isbuffer_obj.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.1.101</span>
</div><ul>
<li><code>obj</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <code>obj</code> 是一个 <code>Buffer</code> 则返回 <code>true</code> ，否则返回 <code>false</code> 。</p>
<h3>类方法：Buffer.isEncoding(encoding)<span><a class="mark" href="buffer.html#buffer_class_method_buffer_isencoding_encoding" id="buffer_class_method_buffer_isencoding_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_method_buffer_isencoding_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_method_buffer_isencoding_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_method_buffer_isencoding_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.9.1</span>
</div><ul>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 一个要检查的字符编码名称</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <code>encoding</code> 是一个支持的字符编码则返回 <code>true</code>，否则返回 <code>false</code> 。</p>
<h3>类属性：Buffer.poolSize<span><a class="mark" href="buffer.html#buffer_class_property_buffer_poolsize" id="buffer_class_property_buffer_poolsize">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_property_buffer_poolsize">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_property_buffer_poolsize.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_property_buffer_poolsize.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.3</span>
</div><ul>
<li>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <strong>默认:</strong> <code>8192</code></li>
</ul>
<p>这是用于决定预分配的、内部 <code>Buffer</code> 实例池的大小的字节数。
这个值可以修改。</p>
<h3>buf[index]<span><a class="mark" href="buffer.html#buffer_buf_index" id="buffer_buf_index">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_index">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_index.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_index.md">编辑中文md文件</a></p>
<div class="api_metadata">

</div><p>索引操作符 <code>[index]</code> 可用于获取或设置 <code>buf</code> 中指定 <code>index</code> 位置的八位字节。
这个值指向的是单个字节，所以合法的值范围是的 <code>0x00</code> 至 <code>0xFF</code>（十六进制），或 <code>0</code> 至 <code>255</code>（十进制）。</p>
<p>该操作符继承自 <code>Uint8Array</code>，所以它对越界访问的处理与 <code>UInt8Array</code> 相同（也就是说，获取时返回 <code>undefined</code>，设置时什么也不做）。</p>
<p>例如：拷贝一个 ASCII 字符串到一个 <code>Buffer</code>，每次一个字节。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> str <span class="sh_symbol">=</span> <span class="sh_string">'Node.js'</span><span class="sh_symbol">;</span>
<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span>str<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>

<span class="sh_keyword">for</span> <span class="sh_symbol">(</span>let i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> str<span class="sh_symbol">.</span>length<span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
  buf<span class="sh_symbol">[</span>i<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> str<span class="sh_symbol">.</span><span class="sh_function">charCodeAt</span><span class="sh_symbol">(</span>i<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>

<span class="sh_comment">// 输出: Node.js</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.buffer<span><a class="mark" href="buffer.html#buffer_buf_buffer" id="buffer_buf_buffer">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_buffer">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_buffer.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_buffer.md">编辑中文md文件</a></p>
<p><code>buffer</code> 属性指向创建该 <code>Buffer</code> 的底层的 <code>ArrayBuffer</code> 对象。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> arrayBuffer <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">ArrayBuffer</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buffer <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>arrayBuffer<span class="sh_symbol">);</span>

console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buffer<span class="sh_symbol">.</span>buffer <span class="sh_symbol">===</span> arrayBuffer<span class="sh_symbol">);</span>
<span class="sh_comment">// 输出: true</span>
</code></pre>
<h3>buf.compare(target[, targetStart[, targetEnd[, sourceStart[, sourceEnd]]]])<span><a class="mark" href="buffer.html#buffer_buf_compare_target_targetstart_targetend_sourcestart_sourceend" id="buffer_buf_compare_target_targetstart_targetend_sourcestart_sourceend">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_compare_target_targetstart_targetend_sourcestart_sourceend">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_compare_target_targetstart_targetend_sourcestart_sourceend.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_compare_target_targetstart_targetend_sourcestart_sourceend.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>target</code> parameter can now be a <code>Uint8Array</code>.</p>
</td></tr>
<tr><td>v5.11.0</td>
<td><p>Additional parameters for specifying offsets are supported now.</p>
</td></tr>
<tr><td>v0.11.13</td>
<td><p><span>新增于: v0.11.13</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>target</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> 要比较的 <code>Buffer</code> 或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a>。</li>
<li><code>targetStart</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>target</code> 中开始对比的偏移量。
<strong>默认:</strong> <code>0</code></li>
<li><code>targetEnd</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>target</code> 中结束对比的偏移量（不包含）。
当 <code>targetStart</code> 为 <code>undefined</code> 时忽略。
<strong>默认:</strong> <code>target.length</code></li>
<li><code>sourceStart</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中开始对比的偏移量。
当 <code>targetStart</code> 为 <code>undefined</code> 时忽略。
<strong>默认:</strong> <code>0</code></li>
<li><code>sourceEnd</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中结束对比的偏移量（不包含）。
当 <code>targetStart</code> 为 <code>undefined</code> 时忽略。
<strong>默认:</strong> <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>比较 <code>buf</code> 与 <code>target</code>，返回表明 <code>buf</code> 在排序上是否排在 <code>target</code> 之前、或之后、或相同。
对比是基于各自 <code>Buffer</code> 实际的字节序列。</p>
<ul>
<li>如果 <code>target</code> 与 <code>buf</code> 相同，则返回 <code>0</code> 。</li>
<li>如果 <code>target</code> 排在 <code>buf</code> <strong>前面</strong>，则返回 <code>1</code> 。</li>
<li>如果 <code>target</code> 排在 <code>buf</code> <strong>后面</strong>，则返回 <code>-1</code> 。</li>
</ul>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'ABC'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'BCD'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf3 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'ABCD'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 0</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: -1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: -1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf3<span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf3<span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: [ &lt;Buffer 41 42 43&gt;, &lt;Buffer 41 42 43 44&gt;, &lt;Buffer 42 43 44&gt; ]</span>
<span class="sh_comment">// (结果相当于: [buf1, buf3, buf2])</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">([</span>buf1<span class="sh_symbol">,</span> buf2<span class="sh_symbol">,</span> buf3<span class="sh_symbol">].</span><span class="sh_function">sort</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span>compare<span class="sh_symbol">));</span>
</code></pre>
<p>可选的  <code>targetStart</code> 、 <code>targetEnd</code> 、 <code>sourceStart</code> 与 <code>sourceEnd</code> 参数可用于分别在 <code>target</code> 与 <code>buf</code> 中限制对比在指定的范围内。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_number">7</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">,</span> <span class="sh_number">9</span><span class="sh_symbol">]);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_number">7</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">,</span> <span class="sh_number">9</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 0</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">9</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: -1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">compare</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>
</code></pre>
<p>如果 <code>targetStart &lt; 0</code> 、 <code>sourceStart &lt; 0</code> 、 <code>targetEnd &gt; target.byteLength</code> 或 <code>sourceEnd &gt; source.byteLength</code>，则抛出 <code>RangeError</code> 错误。</p>
<h3>buf.copy(target[, targetStart[, sourceStart[, sourceEnd]]])<span><a class="mark" href="buffer.html#buffer_buf_copy_target_targetstart_sourcestart_sourceend" id="buffer_buf_copy_target_targetstart_sourcestart_sourceend">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_copy_target_targetstart_sourcestart_sourceend">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_copy_target_targetstart_sourcestart_sourceend.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_copy_target_targetstart_sourcestart_sourceend.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.1.90</span>
</div><ul>
<li><code>target</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> 要拷贝进的 <code>Buffer</code> 或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a>。</li>
<li><code>targetStart</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>target</code> 中开始拷贝进的偏移量。
<strong>默认:</strong> <code>0</code></li>
<li><code>sourceStart</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中开始拷贝的偏移量。
当 <code>targetStart</code> 为 <code>undefined</code> 时忽略。
<strong>默认:</strong> <code>0</code></li>
<li><code>sourceEnd</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中结束拷贝的偏移量（不包含）。
当 <code>sourceStart</code> 为 <code>undefined</code> 时忽略。
<strong>默认:</strong> <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 被拷贝的字节数。</li>
</ul>
<p>拷贝 <code>buf</code> 的一个区域的数据到 <code>target</code> 的一个区域，即便 <code>target</code> 的内存区域与 <code>buf</code> 的重叠。</p>
<p>例子：创建两个 <code>Buffer</code> 实例 <code>buf1</code> 与 <code>buf2</code> ，并拷贝 <code>buf1</code> 中第 16 个至第 19 个字节到 <code>buf2</code> 第 8 个字节起。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">26</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">26</span><span class="sh_symbol">).</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_string">'!'</span><span class="sh_symbol">);</span>

<span class="sh_keyword">for</span> <span class="sh_symbol">(</span>let i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> <span class="sh_number">26</span><span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// 97 是 'a' 的十进制 ASCII 值</span>
  buf1<span class="sh_symbol">[</span>i<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> i <span class="sh_symbol">+</span> <span class="sh_number">97</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

buf1<span class="sh_symbol">.</span><span class="sh_function">copy</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">,</span> <span class="sh_number">16</span><span class="sh_symbol">,</span> <span class="sh_number">20</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: !!!!!!!!qrst!!!!!!!!!!!!!</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">25</span><span class="sh_symbol">));</span>
</code></pre>
<p>例子：创建一个 <code>Buffer</code> ，并拷贝同一 <code>Buffer</code> 中一个区域的数据到另一个重叠的区域。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">26</span><span class="sh_symbol">);</span>

<span class="sh_keyword">for</span> <span class="sh_symbol">(</span>let i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> <span class="sh_number">26</span><span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// 97 是 'a' 的十进制 ASCII 值</span>
  buf<span class="sh_symbol">[</span>i<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> i <span class="sh_symbol">+</span> <span class="sh_number">97</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

buf<span class="sh_symbol">.</span><span class="sh_function">copy</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">10</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: efghijghijklmnopqrstuvwxyz</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
</code></pre>
<h3>buf.entries()<span><a class="mark" href="buffer.html#buffer_buf_entries" id="buffer_buf_entries">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_entries">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_entries.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_entries.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v1.1.0</span>
</div><ul>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterator_protocol" class="type">&lt;Iterator&gt;</a></li>
</ul>
<p>从 <code>buf</code> 的内容中，创建并返回一个 <code>[index, byte]</code> 形式的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols">迭代器</a>。</p>
<p>例子：记录一个 <code>Buffer</code> 全部的内容。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出:</span>
<span class="sh_comment">//   [0, 98]</span>
<span class="sh_comment">//   [1, 117]</span>
<span class="sh_comment">//   [2, 102]</span>
<span class="sh_comment">//   [3, 102]</span>
<span class="sh_comment">//   [4, 101]</span>
<span class="sh_comment">//   [5, 114]</span>
<span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> pair of buf<span class="sh_symbol">.</span><span class="sh_function">entries</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>pair<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</code></pre>
<h3>buf.equals(otherBuffer)<span><a class="mark" href="buffer.html#buffer_buf_equals_otherbuffer" id="buffer_buf_equals_otherbuffer">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_equals_otherbuffer">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_equals_otherbuffer.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_equals_otherbuffer.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>The arguments can now be <code>Uint8Array</code>s.</p>
</td></tr>
<tr><td>v0.11.13</td>
<td><p><span>新增于: v0.11.13</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>otherBuffer</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> 要比较的 <code>Buffer</code> 或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a></li>
</ul>
<p>如果 <code>buf</code> 与 <code>otherBuffer</code> 具有完全相同的字节，则返回 <code>true</code>，否则返回 <code>false</code>。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'ABC'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'414243'</span><span class="sh_symbol">,</span> <span class="sh_string">'hex'</span><span class="sh_symbol">);</span>
<span class="sh_keyword">const</span> buf3 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'ABCD'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: true</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: false</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">equals</span><span class="sh_symbol">(</span>buf3<span class="sh_symbol">));</span>
</code></pre>
<h3>buf.fill(value[, offset[, end]][, encoding])<span><a class="mark" href="buffer.html#buffer_buf_fill_value_offset_end_encoding" id="buffer_buf_fill_value_offset_end_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_fill_value_offset_end_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_fill_value_offset_end_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_fill_value_offset_end_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v5.7.0</td>
<td><p>The <code>encoding</code> parameter is supported now.</p>
</td></tr>
<tr><td>v0.5.0</td>
<td><p><span>新增于: v0.5.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 用来填充 <code>buf</code> 的值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始填充 <code>buf</code> 前要跳过的字节数。<strong>默认:</strong> <code>0</code>。</li>
<li><code>end</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 结束填充 <code>buf</code> 的位置（不包含）。<strong>默认:</strong> <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a>。</li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 如果 <code>value</code> 是一个字符串，则这是它的字符编码。<strong>默认:</strong> <code>'utf8'</code>。</li>
<li>返回: 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> <code>buf</code> 的引用。</li>
</ul>
<p>如果未指定 <code>offset</code> 和 <code>end</code>，则填充整个 <code>buf</code>。
这个简化使得一个 <code>Buffer</code> 的创建与填充可以在一行内完成。</p>
<p>例子：用 ASCII 字符 <code>'h'</code> 填充 <code>Buffer</code>。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> b <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">50</span><span class="sh_symbol">).</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_string">'h'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
</code></pre>
<p><code>value</code> 如果不是一个字符串或整数，则会被强行转换为 <code>uint32</code> 值。</p>
<p>如果 <code>fill()</code> 操作的最后一次写入的是一个多字节字符，则只有字符中适合 <code>buf</code> 的第一个字节会被写入。</p>
<p>例子：用一个两个字节的字符填充 <code>Buffer</code>。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_comment">// 输出: &lt;Buffer c8 a2 c8&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">).</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">0222'</span><span class="sh_symbol">));</span>
</code></pre>
<p>If <code>value</code> contains invalid characters, it is truncated; if no valid
fill data remains, no filling is performed:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">);</span>
<span class="sh_comment">// Prints: &lt;Buffer 61 61 61 61 61&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_string">'a'</span><span class="sh_symbol">));</span>
<span class="sh_comment">// Prints: &lt;Buffer aa aa aa aa aa&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_string">'aazz'</span><span class="sh_symbol">,</span> <span class="sh_string">'hex'</span><span class="sh_symbol">));</span>
<span class="sh_comment">// Prints: &lt;Buffer aa aa aa aa aa&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_string">'zz'</span><span class="sh_symbol">,</span> <span class="sh_string">'hex'</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.includes(value[, byteOffset][, encoding])<span><a class="mark" href="buffer.html#buffer_buf_includes_value_byteoffset_encoding" id="buffer_buf_includes_value_byteoffset_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_includes_value_byteoffset_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_includes_value_byteoffset_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_includes_value_byteoffset_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.3.0</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要搜索的值</li>
<li><code>byteOffset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中开始搜索的位置。<strong>默认:</strong> <code>0</code></li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 如果 <code>value</code> 是一个字符串，则这是它的字符编码。
<strong>默认:</strong> <code>'utf8'</code></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 如果 <code>buf</code> 找到 <code>value</code>，则返回 <code>true</code>，否则返回 <code>false</code></li>
</ul>
<p>相当于 <a href="buffer.html#buffer_buf_indexof_value_byteoffset_encoding"><code>buf.indexOf() !== -1</code></a>。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'this is a buffer'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: true</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">includes</span><span class="sh_symbol">(</span><span class="sh_string">'this'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: true</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">includes</span><span class="sh_symbol">(</span><span class="sh_string">'is'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: true</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">includes</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'a buffer'</span><span class="sh_symbol">)));</span>

<span class="sh_comment">// 输出: true</span>
<span class="sh_comment">// (97 是 'a' 的十进制 ASCII 值)</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">includes</span><span class="sh_symbol">(</span><span class="sh_number">97</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: false</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">includes</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'a buffer example'</span><span class="sh_symbol">)));</span>

<span class="sh_comment">// 输出: true</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">includes</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'a buffer example'</span><span class="sh_symbol">).</span><span class="sh_function">slice</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">)));</span>

<span class="sh_comment">// 输出: false</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">includes</span><span class="sh_symbol">(</span><span class="sh_string">'this'</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.indexOf(value[, byteOffset][, encoding])<span><a class="mark" href="buffer.html#buffer_buf_indexof_value_byteoffset_encoding" id="buffer_buf_indexof_value_byteoffset_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_indexof_value_byteoffset_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_indexof_value_byteoffset_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_indexof_value_byteoffset_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>value</code> can now be a <code>Uint8Array</code>.</p>
</td></tr>
<tr><td>v5.7.0, v4.4.0</td>
<td><p>When <code>encoding</code> is being passed, the <code>byteOffset</code> parameter is no longer required.</p>
</td></tr>
<tr><td>v1.5.0</td>
<td><p><span>新增于: v1.5.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要搜索的值</li>
<li><code>byteOffset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中开始搜索的位置。<strong>默认:</strong> <code>0</code></li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 如果 <code>value</code> 是一个字符串，则这是它的字符编码。
<strong>默认:</strong> <code>'utf8'</code></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中 <code>value</code> 首次出现的索引，如果 <code>buf</code> 没包含 <code>value</code> 则返回 <code>-1</code></li>
</ul>
<p>如果 <code>value</code> 是：</p>
<ul>
<li>字符串，则 <code>value</code> 根据 <code>encoding</code> 的字符编码进行解析。</li>
<li><code>Buffer</code> 或 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array"><code>Uint8Array</code></a>，则 <code>value</code> 会被作为一个整体使用。如果要比较部分 <code>Buffer</code>，可使用 <a href="buffer.html#buffer_buf_slice_start_end"><code>buf.slice()</code></a>。</li>
<li>数值, 则 <code>value</code> 会解析为一个 <code>0</code> 至 <code>255</code> 之间的无符号八位整数值。</li>
</ul>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'this is a buffer'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 0</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'this'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 2</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'is'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 8</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'a buffer'</span><span class="sh_symbol">)));</span>

<span class="sh_comment">// 输出: 8</span>
<span class="sh_comment">// (97 是 'a' 的十进制 ASCII 值)</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_number">97</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: -1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'a buffer example'</span><span class="sh_symbol">)));</span>

<span class="sh_comment">// 输出: 8</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'a buffer example'</span><span class="sh_symbol">).</span><span class="sh_function">slice</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">)));</span>


<span class="sh_keyword">const</span> utf16Buffer <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">039a</span><span class="sh_specialchar">\u</span><span class="sh_string">0391</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3</span><span class="sh_specialchar">\u</span><span class="sh_string">0395'</span><span class="sh_symbol">,</span> <span class="sh_string">'ucs2'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 4</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>utf16Buffer<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_string">'ucs2'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 6</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>utf16Buffer<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3'</span><span class="sh_symbol">,</span> <span class="sh_symbol">-</span><span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_string">'ucs2'</span><span class="sh_symbol">));</span>
</code></pre>
<p>如果 <code>value</code> 不是一个字符串， 数字， 或者 <code>Buffer</code>， 该方法会抛出一个
<code>TypeError</code> 异常， 如果 <code>value</code> 是一个数字， 它将会被强制转换成一个有效的 byte 值，
该值介于0到255之间。</p>
<p>如果 <code>byteOffset</code> 不是一个数字， 它将会被强制转换成一个数字。  任何对 <code>NaN</code> or 0, like <code>{}</code>, <code>[]</code>, <code>null</code> or <code>undefined</code>，
的参数， 将会搜索整个 buffer。 该行为和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf"><code>String#indexOf()</code></a> 保持一致。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> b <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'abcdef'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 传入一个不是有效字节的数字</span>
<span class="sh_comment">// 输出：2，相当于搜索 99 或 'c'</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_number">99.9</span><span class="sh_symbol">));</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_number">256</span> <span class="sh_symbol">+</span> <span class="sh_number">99</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 传入 byteOffset，其值强制转换为 NaN 或 0</span>
<span class="sh_comment">// 输出：1，搜索整个 buffer</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_predef_var">undefined</span><span class="sh_symbol">));</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_cbracket">{}</span><span class="sh_symbol">));</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_keyword">null</span><span class="sh_symbol">));</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">indexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_symbol">[]));</span>
</code></pre>
<p>如果 <code>value</code> 是一个空字符串或空 <code>Buffer</code>，并且 <code>byteOffset</code> 小于 <code>buf.length</code>，返回 <code>byteOffset</code>。如果 <code>value</code> 是一个空字符串，并且 <code>byteOffset</code> 大于 <code>buf.length</code>，返回 <code>buf.length</code>。</p>
<h3>buf.keys()<span><a class="mark" href="buffer.html#buffer_buf_keys" id="buffer_buf_keys">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_keys">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_keys.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_keys.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v1.1.0</span>
</div><ul>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterator_protocol" class="type">&lt;Iterator&gt;</a></li>
</ul>
<p>创建并返回一个包含 <code>buf</code> 键名（索引）的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols">迭代器</a>。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出:</span>
<span class="sh_comment">//   0</span>
<span class="sh_comment">//   1</span>
<span class="sh_comment">//   2</span>
<span class="sh_comment">//   3</span>
<span class="sh_comment">//   4</span>
<span class="sh_comment">//   5</span>
<span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> key of buf<span class="sh_symbol">.</span><span class="sh_function">keys</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>key<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</code></pre>
<h3>buf.lastIndexOf(value[, byteOffset][, encoding])<span><a class="mark" href="buffer.html#buffer_buf_lastindexof_value_byteoffset_encoding" id="buffer_buf_lastindexof_value_byteoffset_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_lastindexof_value_byteoffset_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_lastindexof_value_byteoffset_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_lastindexof_value_byteoffset_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>value</code> can now be a <code>Uint8Array</code>.</p>
</td></tr>
<tr><td>v6.0.0</td>
<td><p><span>新增于: v6.0.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> | 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要搜索的值</li>
<li><code>byteOffset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中开始搜索的位置。
<strong>默认:</strong> <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a><code>- 1</code></li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 如果 <code>value</code> 是一个字符串，则这是它的字符编码。
<strong>默认:</strong> <code>'utf8'</code></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>buf</code> 中 <code>value</code> 最后一次出现的索引，如果 <code>buf</code> 没包含 <code>value</code> 则返回 <code>-1</code></li>
</ul>
<p>与 <a href="buffer.html#buffer_buf_indexof_value_byteoffset_encoding"><code>buf.indexOf()</code></a> 类似，除了 <code>buf</code> 是从后往前搜索而不是从前往后。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'this buffer is a buffer'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 0</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'this'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 17</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 17</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">)));</span>

<span class="sh_comment">// 输出: 15</span>
<span class="sh_comment">// (97 是 'a' 的十进制 ASCII 值)</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_number">97</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: -1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'yolo'</span><span class="sh_symbol">)));</span>

<span class="sh_comment">// 输出: 5</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: -1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">));</span>


<span class="sh_keyword">const</span> utf16Buffer <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">039a</span><span class="sh_specialchar">\u</span><span class="sh_string">0391</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3</span><span class="sh_specialchar">\u</span><span class="sh_string">0395'</span><span class="sh_symbol">,</span> <span class="sh_string">'ucs2'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 6</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>utf16Buffer<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3'</span><span class="sh_symbol">,</span> <span class="sh_predef_var">undefined</span><span class="sh_symbol">,</span> <span class="sh_string">'ucs2'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 4</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>utf16Buffer<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">03a3'</span><span class="sh_symbol">,</span> <span class="sh_symbol">-</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_string">'ucs2'</span><span class="sh_symbol">));</span>
</code></pre>
<p>如果 <code>value</code> 不是一个字符串， 数字， 或者 <code>Buffer</code>， 该方法会抛出一个
<code>TypeError</code> 异常， 如果 <code>value</code> 是一个数字， 它将会被强制转换成一个有效的 byte 值，
该值介于0到255之间。</p>
<p>如果 <code>byteOffset</code> 不是一个数字， 它将会被强制转换成一个数字。  任何对 <code>NaN</code> or 0, like <code>{}</code>, <code>[]</code>, <code>null</code> or <code>undefined</code>，
的参数， 将会搜索整个 buffer。 该行为和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf"><code>String#lastIndexOf()</code></a> 保持一致。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> b <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'abcdef'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 传入一个不是有效字节的数字</span>
<span class="sh_comment">// 输出：2，相当于搜索 99 或 'c'</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_number">99.9</span><span class="sh_symbol">));</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_number">256</span> <span class="sh_symbol">+</span> <span class="sh_number">99</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 传入 byteOffset，其值强制转换为 NaN</span>
<span class="sh_comment">// 输出：1，搜索整个 buffer</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_predef_var">undefined</span><span class="sh_symbol">));</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_cbracket">{}</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 传入 byteOffset，其值强制转换为 0</span>
<span class="sh_comment">// 输出：-1，相当于传入 0</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_keyword">null</span><span class="sh_symbol">));</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>b<span class="sh_symbol">.</span><span class="sh_function">lastIndexOf</span><span class="sh_symbol">(</span><span class="sh_string">'b'</span><span class="sh_symbol">,</span> <span class="sh_symbol">[]));</span>
</code></pre>
<p>如果 <code>value</code> 是一个空字符串或者空 <code>Buffer</code>，返回 <code>byteOffset</code>。</p>
<h3>buf.length<span><a class="mark" href="buffer.html#buffer_buf_length" id="buffer_buf_length">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_length">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_length.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_length.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.1.90</span>
</div><ul>
<li>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>返回 <code>buf</code> 在字节数上分配的内存量。
注意，这并不一定反映 <code>buf</code> 内可用的数据量。</p>
<p>例子：创建一个 <code>Buffer</code> 并写入一个较短的 ASCII 字符串。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">alloc</span><span class="sh_symbol">(</span><span class="sh_number">1234</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 1234</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'some string'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_string">'ascii'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 1234</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>
</code></pre>
<p>虽然 <code>length</code> 属性不是不可变的，但改变 <code>length</code> 的值可能会导致不确定、不一致的行为。
那些希望修改一个 <code>Buffer</code> 的长度的应用程序应当将 <code>length</code> 视为只读的，且使用 <a href="buffer.html#buffer_buf_slice_start_end"><code>buf.slice()</code></a> 创建一个新的 <code>Buffer</code>。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js">let buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'abcdefghj'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_string">'ascii'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 10</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>

buf <span class="sh_symbol">=</span> buf<span class="sh_symbol">.</span><span class="sh_function">slice</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 5</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span>length<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.parent<span><a class="mark" href="buffer.html#buffer_buf_parent" id="buffer_buf_parent">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_parent">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_parent.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_parent.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>废弃于: v8.0.0</span>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">Stability: 0</a> - Deprecated: Use <a href="buffer.html#buffer_buf_buffer"><code>buf.buffer</code></a> instead.</div><p><code>buf.parent</code> 属性是 <code>buf.buffer</code> 不推荐的别名。</p>
<h3>buf.readDoubleBE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readdoublebe_offset_noassert" id="buffer_buf_readdoublebe_offset_noassert">#</a></span></h3>
<h3>buf.readDoubleLE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readdoublele_offset_noassert" id="buffer_buf_readdoublele_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readdoublele_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readdoublele_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readdoublele_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.15</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 8</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li>
</ul>
<p>用指定的字节序格式（<code>readDoubleBE()</code> 返回大端序，<code>readDoubleLE()</code> 返回小端序）从 <code>buf</code> 中指定的 <code>offset</code> 读取一个64位双精度值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_number">7</span><span class="sh_symbol">,</span> <span class="sh_number">8</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 8.20788039913184e-304</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readDoubleBE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: 5.447603722011605e-270</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readDoubleLE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readDoubleLE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 警告: 读取超出 buffer 的最后一位字节！</span>
<span class="sh_comment">// 这会导致内存区段错误！不要这么做！</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readDoubleLE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_keyword">true</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readFloatBE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readfloatbe_offset_noassert" id="buffer_buf_readfloatbe_offset_noassert">#</a></span></h3>
<h3>buf.readFloatLE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readfloatle_offset_noassert" id="buffer_buf_readfloatle_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readfloatle_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readfloatle_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readfloatle_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.15</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 4</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a></li>
</ul>
<p>用指定的字节序格式（<code>readFloatBE()</code> 返回大端序，<code>readFloatLE()</code> 返回小端序）从 <code>buf</code> 中指定的 <code>offset</code> 读取一个32位浮点值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 2.387939260590663e-38</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readFloatBE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: 1.539989614439558e-36</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readFloatLE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readFloatLE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 警告: 读取超出 buffer 的最后一位字节！</span>
<span class="sh_comment">// 这会导致内存区段错误！不要这么做！</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readFloatLE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_keyword">true</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readInt8(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readint8_offset_noassert" id="buffer_buf_readint8_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readint8_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readint8_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readint8_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.0</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 1</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>从 <code>buf</code> 中指定的 <code>offset</code> 读取一个有符号的8位整数值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>从 <code>Buffer</code> 中读取的整数值会被解析为二进制补码值。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([-</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: -1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt8</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 5</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt8</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt8</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readInt16BE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readint16be_offset_noassert" id="buffer_buf_readint16be_offset_noassert">#</a></span></h3>
<h3>buf.readInt16LE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readint16le_offset_noassert" id="buffer_buf_readint16le_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readint16le_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readint16le_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readint16le_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 2</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>用指定的字节序格式（<code>readInt16BE()</code> 返回大端序，<code>readInt16LE()</code> 返回小端序）从 <code>buf</code> 中指定的 <code>offset</code> 读取一个有符号的16位整数值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>从 <code>Buffer</code> 中读取的整数值会被解析为二进制补码值。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 5</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt16BE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: 1280</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt16LE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt16LE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readInt32BE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readint32be_offset_noassert" id="buffer_buf_readint32be_offset_noassert">#</a></span></h3>
<h3>buf.readInt32LE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readint32le_offset_noassert" id="buffer_buf_readint32le_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readint32le_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readint32le_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readint32le_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 4</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>用指定的字节序格式（<code>readInt32BE()</code> 返回大端序，<code>readInt32LE()</code> 返回小端序）从 <code>buf</code> 中指定的 <code>offset</code> 读取一个有符号的32位整数值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>从 <code>Buffer</code> 中读取的整数值会被解析为二进制补码值。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 5</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt32BE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: 83886080</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt32LE</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readInt32LE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readIntBE(offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readintbe_offset_bytelength_noassert" id="buffer_buf_readintbe_offset_bytelength_noassert">#</a></span></h3>
<h3>buf.readIntLE(offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readintle_offset_bytelength_noassert" id="buffer_buf_readintle_offset_bytelength_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readintle_offset_bytelength_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readintle_offset_bytelength_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readintle_offset_bytelength_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.15</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - byteLength</code>。</li>
<li><code>byteLength</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要读取的字节数。必须满足：<code>0 &lt; byteLength &lt;= 6</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 和 <code>byteLength</code> 校验？ <strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>从 <code>buf</code> 中指定的 <code>offset</code> 读取 <code>byteLength</code> 个字节，且读取的值会被解析为二进制补码值。
最高支持48位精度。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x12</span><span class="sh_symbol">,</span> <span class="sh_number">0x34</span><span class="sh_symbol">,</span> <span class="sh_number">0x56</span><span class="sh_symbol">,</span> <span class="sh_number">0x78</span><span class="sh_symbol">,</span> <span class="sh_number">0x90</span><span class="sh_symbol">,</span> <span class="sh_number">0xab</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: -546f87a9cbee</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readIntLE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 1234567890ab</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readIntBE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readIntBE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readUInt8(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readuint8_offset_noassert" id="buffer_buf_readuint8_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readuint8_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readuint8_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readuint8_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.0</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 1</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>从 <code>buf</code> 中指定的 <code>offset</code> 读取一个无符号的8位整数值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_symbol">-</span><span class="sh_number">2</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 1</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt8</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 254</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt8</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt8</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readUInt16BE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readuint16be_offset_noassert" id="buffer_buf_readuint16be_offset_noassert">#</a></span></h3>
<h3>buf.readUInt16LE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readuint16le_offset_noassert" id="buffer_buf_readuint16le_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readuint16le_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readuint16le_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readuint16le_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 2</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>用指定的字节序格式（<code>readUInt16BE()</code> 返回大端序，<code>readUInt16LE()</code> 返回小端序）从 <code>buf</code> 中指定的 <code>offset</code> 读取一个无符号的16位整数值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x12</span><span class="sh_symbol">,</span> <span class="sh_number">0x34</span><span class="sh_symbol">,</span> <span class="sh_number">0x56</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 1234</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt16BE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 3412</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt16LE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 3456</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt16BE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 5634</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt16LE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt16LE</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readUInt32BE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readuint32be_offset_noassert" id="buffer_buf_readuint32be_offset_noassert">#</a></span></h3>
<h3>buf.readUInt32LE(offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readuint32le_offset_noassert" id="buffer_buf_readuint32le_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readuint32le_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readuint32le_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readuint32le_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 4</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>用指定的字节序格式（<code>readUInt32BE()</code> 返回大端序，<code>readUInt32LE()</code> 返回小端序）从 <code>buf</code> 中指定的 <code>offset</code> 读取一个无符号的32位整数值。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x12</span><span class="sh_symbol">,</span> <span class="sh_number">0x34</span><span class="sh_symbol">,</span> <span class="sh_number">0x56</span><span class="sh_symbol">,</span> <span class="sh_number">0x78</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 12345678</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt32BE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: 78563412</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt32LE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUInt32LE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.readUIntBE(offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readuintbe_offset_bytelength_noassert" id="buffer_buf_readuintbe_offset_bytelength_noassert">#</a></span></h3>
<h3>buf.readUIntLE(offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_readuintle_offset_bytelength_noassert" id="buffer_buf_readuintle_offset_bytelength_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_readuintle_offset_bytelength_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_readuintle_offset_bytelength_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_readuintle_offset_bytelength_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.15</span>
</div><ul>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始读取前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - byteLength</code>。</li>
<li><code>byteLength</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要读取的字节数。必须满足：<code>0 &lt; byteLength &lt;= 6</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>offset</code> 和 <code>byteLength</code> 校验？ <strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a></li>
</ul>
<p>从 <code>buf</code> 中指定的 <code>offset</code> 读取 <code>byteLength</code> 个字节，且读取的值会被解析为无符号的整数。
最高支持48位精度。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>offset</code> 可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x12</span><span class="sh_symbol">,</span> <span class="sh_number">0x34</span><span class="sh_symbol">,</span> <span class="sh_number">0x56</span><span class="sh_symbol">,</span> <span class="sh_number">0x78</span><span class="sh_symbol">,</span> <span class="sh_number">0x90</span><span class="sh_symbol">,</span> <span class="sh_number">0xab</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: 1234567890ab</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUIntBE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: ab9078563412</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUIntLE</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>

<span class="sh_comment">//抛出异常: RangeError: Index out of range</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">readUIntBE</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.slice([start[, end]])<span><a class="mark" href="buffer.html#buffer_buf_slice_start_end" id="buffer_buf_slice_start_end">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_slice_start_end">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_slice_start_end.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_slice_start_end.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v7.1.0, v6.9.2</td>
<td><p>Coercing the offsets to integers now handles values outside the 32-bit integer range properly.</p>
</td></tr>
<tr><td>v7.0.0</td>
<td><p>All offsets are now coerced to integers before doing any calculations with them.</p>
</td></tr>
<tr><td>v0.3.0</td>
<td><p><span>新增于: v0.3.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>start</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 新建的 <code>Buffer</code> 开始的位置。 <strong>默认:</strong> <code>0</code></li>
<li><code>end</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 新建的 <code>Buffer</code> 结束的位置（不包含）。
<strong>默认:</strong> <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a></li>
<li>返回: 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a></li>
</ul>
<p>返回一个指向相同原始内存的新建的 <code>Buffer</code>，但做了偏移且通过 <code>start</code> 和 <code>end</code> 索引进行裁剪。</p>
<p>Specifying <code>end</code> greater than <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a> will return the same result as
that of <code>end</code> equal to <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a>.</p>
<p><strong>注意，修改这个新建的 <code>Buffer</code> 切片，也会同时修改原始的 <code>Buffer</code> 的内存，因为这两个对象所分配的内存是重叠的。</strong></p>
<p>例子：创建一个包含 ASCII 字母表的 <code>Buffer</code>，并进行切片，然后修改原始 <code>Buffer</code> 上的一个字节。</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">26</span><span class="sh_symbol">);</span>

<span class="sh_keyword">for</span> <span class="sh_symbol">(</span>let i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> <span class="sh_number">26</span><span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// 97 是 'a' 的十进制 ASCII 值 </span>
  buf1<span class="sh_symbol">[</span>i<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> i <span class="sh_symbol">+</span> <span class="sh_number">97</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> buf1<span class="sh_symbol">.</span><span class="sh_function">slice</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: abc</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> buf2<span class="sh_symbol">.</span>length<span class="sh_symbol">));</span>

buf1<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]</span> <span class="sh_symbol">=</span> <span class="sh_number">33</span><span class="sh_symbol">;</span>

<span class="sh_comment">// 输出: !bc</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> buf2<span class="sh_symbol">.</span>length<span class="sh_symbol">));</span>
</code></pre>
<p>指定负的索引会导致切片的生成是相对于 <code>buf</code> 的末尾而不是开头。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: buffe</span>
<span class="sh_comment">// (相当于 buf.slice(0, 5))</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">slice</span><span class="sh_symbol">(-</span><span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_symbol">-</span><span class="sh_number">1</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: buff</span>
<span class="sh_comment">// (相当于 buf.slice(0, 4))</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">slice</span><span class="sh_symbol">(-</span><span class="sh_number">6</span><span class="sh_symbol">,</span> <span class="sh_symbol">-</span><span class="sh_number">2</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>

<span class="sh_comment">// 输出: uff</span>
<span class="sh_comment">// (相当于 buf.slice(1, 4))</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">.</span><span class="sh_function">slice</span><span class="sh_symbol">(-</span><span class="sh_number">5</span><span class="sh_symbol">,</span> <span class="sh_symbol">-</span><span class="sh_number">2</span><span class="sh_symbol">).</span><span class="sh_function">toString</span><span class="sh_symbol">());</span>
</code></pre>
<h3>buf.swap16()<span><a class="mark" href="buffer.html#buffer_buf_swap16" id="buffer_buf_swap16">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_swap16">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_swap16.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_swap16.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.10.0</span>
</div><ul>
<li>返回: 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> <code>buf</code> 的引用</li>
</ul>
<p>将 <code>buf</code> 解析为一个无符号16位的整数数组，并且以字节顺序原地进行交换。
如果 <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a> 不是2的倍数，则抛出 <code>RangeError</code> 错误。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x1</span><span class="sh_symbol">,</span> <span class="sh_number">0x2</span><span class="sh_symbol">,</span> <span class="sh_number">0x3</span><span class="sh_symbol">,</span> <span class="sh_number">0x4</span><span class="sh_symbol">,</span> <span class="sh_number">0x5</span><span class="sh_symbol">,</span> <span class="sh_number">0x6</span><span class="sh_symbol">,</span> <span class="sh_number">0x7</span><span class="sh_symbol">,</span> <span class="sh_number">0x8</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: &lt;Buffer 01 02 03 04 05 06 07 08&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>

buf1<span class="sh_symbol">.</span><span class="sh_function">swap16</span><span class="sh_symbol">();</span>

<span class="sh_comment">// 输出: &lt;Buffer 02 01 04 03 06 05 08 07&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>


<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x1</span><span class="sh_symbol">,</span> <span class="sh_number">0x2</span><span class="sh_symbol">,</span> <span class="sh_number">0x3</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 抛出异常: RangeError: Buffer size must be a multiple of 16-bits</span>
buf2<span class="sh_symbol">.</span><span class="sh_function">swap16</span><span class="sh_symbol">();</span>
</code></pre>
<h3>buf.swap32()<span><a class="mark" href="buffer.html#buffer_buf_swap32" id="buffer_buf_swap32">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_swap32">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_swap32.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_swap32.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v5.10.0</span>
</div><ul>
<li>返回: 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> <code>buf</code> 的引用</li>
</ul>
<p>将 <code>buf</code> 解析为一个无符号32位的整数数组，并且以字节顺序原地进行交换。
如果 <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a> 不是4的倍数，则抛出 <code>RangeError</code> 错误。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x1</span><span class="sh_symbol">,</span> <span class="sh_number">0x2</span><span class="sh_symbol">,</span> <span class="sh_number">0x3</span><span class="sh_symbol">,</span> <span class="sh_number">0x4</span><span class="sh_symbol">,</span> <span class="sh_number">0x5</span><span class="sh_symbol">,</span> <span class="sh_number">0x6</span><span class="sh_symbol">,</span> <span class="sh_number">0x7</span><span class="sh_symbol">,</span> <span class="sh_number">0x8</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: &lt;Buffer 01 02 03 04 05 06 07 08&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>

buf1<span class="sh_symbol">.</span><span class="sh_function">swap32</span><span class="sh_symbol">();</span>

<span class="sh_comment">// 输出: &lt;Buffer 04 03 02 01 08 07 06 05&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>


<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x1</span><span class="sh_symbol">,</span> <span class="sh_number">0x2</span><span class="sh_symbol">,</span> <span class="sh_number">0x3</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 抛出异常: RangeError: Buffer size must be a multiple of 32-bits</span>
buf2<span class="sh_symbol">.</span><span class="sh_function">swap32</span><span class="sh_symbol">();</span>
</code></pre>
<h3>buf.swap64()<span><a class="mark" href="buffer.html#buffer_buf_swap64" id="buffer_buf_swap64">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_swap64">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_swap64.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_swap64.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v6.3.0</span>
</div><ul>
<li>返回: 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> <code>buf</code> 的引用</li>
</ul>
<p>将 <code>buf</code> 解析为一个64位的数值数组，并且以字节顺序原地进行交换。
如果 <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a> 不是8的倍数，则抛出 <code>RangeError</code> 错误。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x1</span><span class="sh_symbol">,</span> <span class="sh_number">0x2</span><span class="sh_symbol">,</span> <span class="sh_number">0x3</span><span class="sh_symbol">,</span> <span class="sh_number">0x4</span><span class="sh_symbol">,</span> <span class="sh_number">0x5</span><span class="sh_symbol">,</span> <span class="sh_number">0x6</span><span class="sh_symbol">,</span> <span class="sh_number">0x7</span><span class="sh_symbol">,</span> <span class="sh_number">0x8</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 输出: &lt;Buffer 01 02 03 04 05 06 07 08&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>

buf1<span class="sh_symbol">.</span><span class="sh_function">swap64</span><span class="sh_symbol">();</span>

<span class="sh_comment">// 输出: &lt;Buffer 08 07 06 05 04 03 02 01&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">);</span>


<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x1</span><span class="sh_symbol">,</span> <span class="sh_number">0x2</span><span class="sh_symbol">,</span> <span class="sh_number">0x3</span><span class="sh_symbol">]);</span>

<span class="sh_comment">// 抛出异常: RangeError: Buffer size must be a multiple of 64-bits</span>
buf2<span class="sh_symbol">.</span><span class="sh_function">swap64</span><span class="sh_symbol">();</span>
</code></pre>
<p>注意，JavaScript 不能编码64位整数。
该方法是用来处理64位浮点数的。</p>
<h3>buf.toJSON()<span><a class="mark" href="buffer.html#buffer_buf_tojson" id="buffer_buf_tojson">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_tojson">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_tojson.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_tojson.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.9.2</span>
</div><ul>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" class="type">&lt;Object&gt;</a></li>
</ul>
<p>返回 <code>buf</code> 的 JSON 格式。
当字符串化一个 <code>Buffer</code> 实例时，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code>JSON.stringify()</code></a> 会隐式地调用该函数。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">([</span><span class="sh_number">0x1</span><span class="sh_symbol">,</span> <span class="sh_number">0x2</span><span class="sh_symbol">,</span> <span class="sh_number">0x3</span><span class="sh_symbol">,</span> <span class="sh_number">0x4</span><span class="sh_symbol">,</span> <span class="sh_number">0x5</span><span class="sh_symbol">]);</span>
<span class="sh_keyword">const</span> json <span class="sh_symbol">=</span> JSON<span class="sh_symbol">.</span><span class="sh_function">stringify</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: {"type":"Buffer","data":[1,2,3,4,5]}</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>json<span class="sh_symbol">);</span>

<span class="sh_keyword">const</span> copy <span class="sh_symbol">=</span> JSON<span class="sh_symbol">.</span><span class="sh_function">parse</span><span class="sh_symbol">(</span>json<span class="sh_symbol">,</span> <span class="sh_symbol">(</span>key<span class="sh_symbol">,</span> value<span class="sh_symbol">)</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_keyword">return</span> value <span class="sh_symbol">&amp;&amp;</span> value<span class="sh_symbol">.</span>type <span class="sh_symbol">===</span> <span class="sh_string">'Buffer'</span> <span class="sh_symbol">?</span>
    Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span>value<span class="sh_symbol">.</span>data<span class="sh_symbol">)</span> <span class="sh_symbol">:</span>
    value<span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 01 02 03 04 05&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>copy<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.toString([encoding[, start[, end]]])<span><a class="mark" href="buffer.html#buffer_buf_tostring_encoding_start_end" id="buffer_buf_tostring_encoding_start_end">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_tostring_encoding_start_end">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_tostring_encoding_start_end.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_tostring_encoding_start_end.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.1.90</span>
</div><ul>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 解码使用的字符编码。<strong>默认:</strong> <code>'utf8'</code></li>
<li><code>start</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始解码的字节偏移量。<strong>默认:</strong> <code>0</code></li>
<li><code>end</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 结束解码的字节偏移量（不包含）。
<strong>默认:</strong> <a href="buffer.html#buffer_buf_length"><code>buf.length</code></a></li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a></li>
</ul>
<p>根据 <code>encoding</code> 指定的字符编码解码 <code>buf</code> 成一个字符串。
<code>start</code> 和 <code>end</code> 可传入用于只解码 <code>buf</code> 的一部分。</p>
<p>字符串实例的最大长度（以UTF-16代码为单位）可查看<a href="buffer.html#buffer_buffer_constants_max_string_length"><code>buffer.constants.MAX_STRING_LENGTH</code></a>。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf1 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">26</span><span class="sh_symbol">);</span>

<span class="sh_keyword">for</span> <span class="sh_symbol">(</span>let i <span class="sh_symbol">=</span> <span class="sh_number">0</span><span class="sh_symbol">;</span> i <span class="sh_symbol">&lt;</span> <span class="sh_number">26</span><span class="sh_symbol">;</span> i<span class="sh_symbol">++)</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// 97 是 'a' 的十进制 ASCII 值</span>
  buf1<span class="sh_symbol">[</span>i<span class="sh_symbol">]</span> <span class="sh_symbol">=</span> i <span class="sh_symbol">+</span> <span class="sh_number">97</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

<span class="sh_comment">// 输出: abcdefghijklmnopqrstuvwxyz</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: abcde</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf1<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">5</span><span class="sh_symbol">));</span>


<span class="sh_keyword">const</span> buf2 <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'tést'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 74c3a97374</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'hex'</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: té</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'utf8'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">));</span>

<span class="sh_comment">// 输出: té</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf2<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_predef_var">undefined</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">));</span>
</code></pre>
<h3>buf.values()<span><a class="mark" href="buffer.html#buffer_buf_values" id="buffer_buf_values">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_values">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_values.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_values.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v1.1.0</span>
</div><ul>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterator_protocol" class="type">&lt;Iterator&gt;</a></li>
</ul>
<p>创建并返回一个包含 <code>buf</code> 的值（字节）的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols">迭代器</a>。
当 <code>Buffer</code> 使用 <code>for..of</code> 时会自动调用该函数。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出:</span>
<span class="sh_comment">//   98</span>
<span class="sh_comment">//   117</span>
<span class="sh_comment">//   102</span>
<span class="sh_comment">//   102</span>
<span class="sh_comment">//   101</span>
<span class="sh_comment">//   114</span>
<span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> value of buf<span class="sh_symbol">.</span><span class="sh_function">values</span><span class="sh_symbol">())</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>value<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>

<span class="sh_comment">// 输出:</span>
<span class="sh_comment">//   98</span>
<span class="sh_comment">//   117</span>
<span class="sh_comment">//   102</span>
<span class="sh_comment">//   102</span>
<span class="sh_comment">//   101</span>
<span class="sh_comment">//   114</span>
<span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_keyword">const</span> value of buf<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>value<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span>
</code></pre>
<h3>buf.write(string[, offset[, length]][, encoding])<span><a class="mark" href="buffer.html#buffer_buf_write_string_offset_length_encoding" id="buffer_buf_write_string_offset_length_encoding">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_write_string_offset_length_encoding">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_write_string_offset_length_encoding.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_write_string_offset_length_encoding.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.1.90</span>
</div><ul>
<li><code>string</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 要写入 <code>buf</code> 的字符串。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入 <code>string</code> 前要跳过的字节数。<strong>默认:</strong> <code>0</code>。</li>
<li><code>length</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入的字节数。<strong>默认:</strong> <code>buf.length - offset</code>。</li>
<li><code>encoding</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> <code>string</code> 的字符编码。<strong>默认:</strong> <code>'utf8'</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 写入的字节数。</li>
</ul>
<p>根据 <code>encoding</code> 的字符编码写入 <code>string</code> 到 <code>buf</code> 中的 <code>offset</code> 位置。
<code>length</code> 参数是写入的字节数。
如果 <code>buf</code> 没有足够的空间保存整个字符串，则只会写入 <code>string</code> 的一部分。
只部分解码的字符不会被写入。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">256</span><span class="sh_symbol">);</span>

<span class="sh_keyword">const</span> len <span class="sh_symbol">=</span> buf<span class="sh_symbol">.</span><span class="sh_function">write</span><span class="sh_symbol">(</span><span class="sh_string">'</span><span class="sh_specialchar">\u</span><span class="sh_string">00bd + </span><span class="sh_specialchar">\u</span><span class="sh_string">00bc = </span><span class="sh_specialchar">\u</span><span class="sh_string">00be'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: 12 个字节: ½ + ¼ = ¾</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>`$<span class="sh_cbracket">{</span>len<span class="sh_cbracket">}</span> 个字节<span class="sh_symbol">:</span> $<span class="sh_cbracket">{</span>buf<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'utf8'</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> len<span class="sh_symbol">)</span><span class="sh_cbracket">}</span>`<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeDoubleBE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writedoublebe_value_offset_noassert" id="buffer_buf_writedoublebe_value_offset_noassert">#</a></span></h3>
<h3>buf.writeDoubleLE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writedoublele_value_offset_noassert" id="buffer_buf_writedoublele_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writedoublele_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writedoublele_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writedoublele_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.15</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 8</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>用指定的字节序格式（<code>writeDoubleBE()</code> 写入大端序，<code>writeDoubleLE()</code> 写入小端序）写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的64位双精度值。
当 <code>value</code> 不是一个64位双精度值时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeDoubleBE</span><span class="sh_symbol">(</span><span class="sh_number">0xdeadbeefcafebabe</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 43 eb d5 b7 dd f9 5f d7&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeDoubleLE</span><span class="sh_symbol">(</span><span class="sh_number">0xdeadbeefcafebabe</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer d7 5f f9 dd b7 d5 eb 43&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeFloatBE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writefloatbe_value_offset_noassert" id="buffer_buf_writefloatbe_value_offset_noassert">#</a></span></h3>
<h3>buf.writeFloatLE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writefloatle_value_offset_noassert" id="buffer_buf_writefloatle_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writefloatle_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writefloatle_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writefloatle_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.15</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;number&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 4</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>用指定的字节序格式（<code>writeFloatBE()</code> 写入大端序，<code>writeFloatLE()</code> 写入小端序）写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的32位浮点值。
当 <code>value</code> 不是一个32位浮点值时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeFloatBE</span><span class="sh_symbol">(</span><span class="sh_number">0xcafebabe</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 4f 4a fe bb&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeFloatLE</span><span class="sh_symbol">(</span><span class="sh_number">0xcafebabe</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer bb fe 4a 4f&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeInt8(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeint8_value_offset_noassert" id="buffer_buf_writeint8_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeint8_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeint8_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeint8_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.0</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 1</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的有符号的8位整数。
当 <code>value</code> 不是一个有符号的8位整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的末尾，但后果是不确定的。</p>
<p><code>value</code> 会被解析并写入为二进制补码值。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeInt8</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeInt8</span><span class="sh_symbol">(-</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 02 fe&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeInt16BE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeint16be_value_offset_noassert" id="buffer_buf_writeint16be_value_offset_noassert">#</a></span></h3>
<h3>buf.writeInt16LE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeint16le_value_offset_noassert" id="buffer_buf_writeint16le_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeint16le_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeint16le_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeint16le_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 2</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>用指定的字节序格式（<code>writeInt16BE()</code> 写入大端序，<code>writeInt16LE()</code> 写入小端序）写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的有符号的16位整数。
当 <code>value</code> 不是一个有符号的16位整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p><code>value</code> 会被解析并写入为二进制补码值。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeInt16BE</span><span class="sh_symbol">(</span><span class="sh_number">0x0102</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeInt16LE</span><span class="sh_symbol">(</span><span class="sh_number">0x0304</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 01 02 04 03&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeInt32BE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeint32be_value_offset_noassert" id="buffer_buf_writeint32be_value_offset_noassert">#</a></span></h3>
<h3>buf.writeInt32LE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeint32le_value_offset_noassert" id="buffer_buf_writeint32le_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeint32le_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeint32le_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeint32le_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 4</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>用指定的字节序格式（<code>writeInt32BE()</code> 写入大端序，<code>writeInt32LE()</code> 写入小端序）写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的有符号的32位整数。
当 <code>value</code> 不是一个有符号的32位整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p><code>value</code> 会被解析并写入为二进制补码值。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeInt32BE</span><span class="sh_symbol">(</span><span class="sh_number">0x01020304</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeInt32LE</span><span class="sh_symbol">(</span><span class="sh_number">0x05060708</span><span class="sh_symbol">,</span> <span class="sh_number">4</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 01 02 03 04 08 07 06 05&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeIntBE(value, offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeintbe_value_offset_bytelength_noassert" id="buffer_buf_writeintbe_value_offset_bytelength_noassert">#</a></span></h3>
<h3>buf.writeIntLE(value, offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeintle_value_offset_bytelength_noassert" id="buffer_buf_writeintle_value_offset_bytelength_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeintle_value_offset_bytelength_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeintle_value_offset_bytelength_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeintle_value_offset_bytelength_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.11.15</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - byteLength</code>。</li>
<li><code>byteLength</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入的字节数，必须满足：<code>0 &lt; byteLength &lt;= 6</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code>、<code>offset</code> 和 <code>byteLength</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>写入 <code>value</code> 中的 <code>byteLength</code> 个字节到 <code>buf</code> 中指定的 <code>offset</code> 位置。
最高支持48位精度。
当 <code>value</code> 不是一个有符号的整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的末尾，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeIntBE</span><span class="sh_symbol">(</span><span class="sh_number">0x1234567890ab</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 12 34 56 78 90 ab&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeIntLE</span><span class="sh_symbol">(</span><span class="sh_number">0x1234567890ab</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer ab 90 78 56 34 12&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeUInt8(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeuint8_value_offset_noassert" id="buffer_buf_writeuint8_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeuint8_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeuint8_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeuint8_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.0</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 1</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的无符号的8位整数。
当 <code>value</code> 不是一个无符号的8位整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的末尾，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt8</span><span class="sh_symbol">(</span><span class="sh_number">0x3</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt8</span><span class="sh_symbol">(</span><span class="sh_number">0x4</span><span class="sh_symbol">,</span> <span class="sh_number">1</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt8</span><span class="sh_symbol">(</span><span class="sh_number">0x23</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt8</span><span class="sh_symbol">(</span><span class="sh_number">0x42</span><span class="sh_symbol">,</span> <span class="sh_number">3</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 03 04 23 42&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeUInt16BE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeuint16be_value_offset_noassert" id="buffer_buf_writeuint16be_value_offset_noassert">#</a></span></h3>
<h3>buf.writeUInt16LE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeuint16le_value_offset_noassert" id="buffer_buf_writeuint16le_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeuint16le_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeuint16le_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeuint16le_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 2</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>用指定的字节序格式（<code>writeUInt16BE()</code> 写入大端序，<code>writeUInt16LE()</code> 写入小端序）写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的无符号的16位整数。
当 <code>value</code> 不是一个无符号的16位整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt16BE</span><span class="sh_symbol">(</span><span class="sh_number">0xdead</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt16BE</span><span class="sh_symbol">(</span><span class="sh_number">0xbeef</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer de ad be ef&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt16LE</span><span class="sh_symbol">(</span><span class="sh_number">0xdead</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>
buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt16LE</span><span class="sh_symbol">(</span><span class="sh_number">0xbeef</span><span class="sh_symbol">,</span> <span class="sh_number">2</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer ad de ef be&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeUInt32BE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeuint32be_value_offset_noassert" id="buffer_buf_writeuint32be_value_offset_noassert">#</a></span></h3>
<h3>buf.writeUInt32LE(value, offset[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeuint32le_value_offset_noassert" id="buffer_buf_writeuint32le_value_offset_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeuint32le_value_offset_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeuint32le_value_offset_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeuint32le_value_offset_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - 4</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code> 和 <code>offset</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>用指定的字节序格式（<code>writeUInt32BE()</code> 写入大端序，<code>writeUInt32LE()</code> 写入小端序）写入 <code>value</code> 到 <code>buf</code> 中指定的 <code>offset</code> 位置。
<code>value</code> 应当是一个有效的无符号的32位整数。
当 <code>value</code> 不是一个无符号的32位整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的最后一位字节，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt32BE</span><span class="sh_symbol">(</span><span class="sh_number">0xfeedface</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer fe ed fa ce&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeUInt32LE</span><span class="sh_symbol">(</span><span class="sh_number">0xfeedface</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer ce fa ed fe&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h3>buf.writeUIntBE(value, offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeuintbe_value_offset_bytelength_noassert" id="buffer_buf_writeuintbe_value_offset_bytelength_noassert">#</a></span></h3>
<h3>buf.writeUIntLE(value, offset, byteLength[, noAssert])<span><a class="mark" href="buffer.html#buffer_buf_writeuintle_value_offset_bytelength_noassert" id="buffer_buf_writeuintle_value_offset_bytelength_noassert">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buf_writeuintle_value_offset_bytelength_noassert">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buf_writeuintle_value_offset_bytelength_noassert.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buf_writeuintle_value_offset_bytelength_noassert.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.5</span>
</div><ul>
<li><code>value</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入 <code>buf</code> 的数值。</li>
<li><code>offset</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 开始写入前要跳过的字节数，必须满足：<code>0 &lt;= offset &lt;= buf.length - byteLength</code>。</li>
<li><code>byteLength</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 要写入的字节数，必须满足：<code>0 &lt; byteLength &lt;= 6</code>。</li>
<li><code>noAssert</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" class="type">&lt;boolean&gt;</a> 是否跳过 <code>value</code>、<code>offset</code> 和 <code>byteLength</code> 检验？<strong>默认:</strong> <code>false</code>。</li>
<li>返回: 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> <code>offset</code> 加上写入的字节数。</li>
</ul>
<p>写入 <code>value</code> 中的 <code>byteLength</code> 个字节到 <code>buf</code> 中指定的 <code>offset</code> 位置。
最高支持48位精度。
当 <code>value</code> 不是一个无符号的整数时，反应是不确定的。</p>
<p>设置 <code>noAssert</code> 为 <code>true</code> 则 <code>value</code> 的编码形式可超出 <code>buf</code> 的末尾，但后果是不确定的。</p>
<p>例子：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> Buffer<span class="sh_symbol">.</span><span class="sh_function">allocUnsafe</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeUIntBE</span><span class="sh_symbol">(</span><span class="sh_number">0x1234567890ab</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 12 34 56 78 90 ab&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">writeUIntLE</span><span class="sh_symbol">(</span><span class="sh_number">0x1234567890ab</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">6</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer ab 90 78 56 34 12&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h2>buffer.INSPECT_MAX_BYTES<span><a class="mark" href="buffer.html#buffer_buffer_inspect_max_bytes" id="buffer_buffer_inspect_max_bytes">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer_inspect_max_bytes">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer_inspect_max_bytes.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer_inspect_max_bytes.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v0.5.4</span>
</div><ul>
<li>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;Integer&gt;</a> <strong>默认:</strong> <code>50</code></li>
</ul>
<p>当调用 <code>buf.inspect()</code> 时返回的最大字节数。
可以被用户模块重写。
详见 <a href="util.html#util_util_inspect_object_options"><code>util.inspect()</code></a> 了解更多 <code>buf.inspect()</code> 的行为。</p>
<p>注意，这个属性是在通过 <code>require('buffer')</code> 返回的 <code>buffer</code> 模块上，而不是在 <code>Buffer</code> 的全局变量或 <code>Buffer</code> 实例上。</p>
<h2>buffer.kMaxLength<span><a class="mark" href="buffer.html#buffer_buffer_kmaxlength" id="buffer_buffer_kmaxlength">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer_kmaxlength">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer_kmaxlength.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer_kmaxlength.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: v3.0.0</span>
</div><ul>
<li>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 分配给单个 <code>Buffer</code> 实例的最大内存</li>
</ul>
<p>An alias for <a href="buffer.html#buffer_buffer_constants_max_length"><code>buffer.constants.MAX_LENGTH</code></a></p>
<p>注意整个属性是通过 <code>require('buffer')</code> 返回的 <code>buffer</code> 模块的属性，而不是全局 <code>Buffer</code> 对象或 <code>Buffer</code> 实例的属性。</p>
<h2>buffer.transcode(source, fromEnc, toEnc)<span><a class="mark" href="buffer.html#buffer_buffer_transcode_source_fromenc_toenc" id="buffer_buffer_transcode_source_fromenc_toenc">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer_transcode_source_fromenc_toenc">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer_transcode_source_fromenc_toenc.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer_transcode_source_fromenc_toenc.md">编辑中文md文件</a></p>
<div class="api_metadata">
<details class="changelog"><summary>版本历史</summary>
<table>
<tbody><tr><th>版本</th><th>变更</th></tr>
<tr><td>v8.0.0</td>
<td><p>The <code>source</code> parameter can now be a <code>Uint8Array</code>.</p>
</td></tr>
<tr><td>v7.1.0</td>
<td><p><span>新增于: v7.1.0</span></p>
</td></tr>
</tbody></table>
</details>
</div><ul>
<li><code>source</code> 
            <a href="buffer.html#buffer_class_buffer" class="type">&lt;Buffer&gt;</a> | 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" class="type">&lt;Uint8Array&gt;</a> 一个 <code>Buffer</code> 或 <code>Uint8Array</code> 实例</li>
<li><code>fromEnc</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 当前编码</li>
<li><code>toEnc</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" class="type">&lt;string&gt;</a> 目标编码</li>
</ul>
<p>将给定的 <code>Buffer</code> 或 <code>Uint8Array</code> 实例从一个字符编码重新编码到另一个字符。 返回一个新的Buffer实例。</p>
<p>如果 <code>fromEnc</code> 或 <code>toEnc</code> 指定的字符串编码无效，或者不允许从 <code>fromEnc</code> 转换为 <code>toEnc</code>，将抛出异常。</p>
<p>如果给定的字节序列不能在目标编码中充分表示，转码过程将使用替代字符。例如：</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> buffer <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>

<span class="sh_keyword">const</span> newBuf <span class="sh_symbol">=</span> buffer<span class="sh_symbol">.</span><span class="sh_function">transcode</span><span class="sh_symbol">(</span>Buffer<span class="sh_symbol">.</span><span class="sh_function">from</span><span class="sh_symbol">(</span><span class="sh_string">'€'</span><span class="sh_symbol">),</span> <span class="sh_string">'utf8'</span><span class="sh_symbol">,</span> <span class="sh_string">'ascii'</span><span class="sh_symbol">);</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>newBuf<span class="sh_symbol">.</span><span class="sh_function">toString</span><span class="sh_symbol">(</span><span class="sh_string">'ascii'</span><span class="sh_symbol">));</span>
<span class="sh_comment">// 输出: '?'</span>
</code></pre>
<p>因为欧元符号（<code>€</code>）不能在 US-ASCII 中表示，所以在转换 <code>Buffer</code> 的时候使用 <code>?</code> 代替。</p>
<p>注意 <code>buffer</code> 属性是通过 <code>require('buffer')</code> 返回的 <code>buffer</code> 模块，而不是全局 <code>Buffer</code> 或 <code>Buffer</code> 实例的属性。</p>
<h2>SlowBuffer 类<span><a class="mark" href="buffer.html#buffer_class_slowbuffer" id="buffer_class_slowbuffer">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_class_slowbuffer">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/class_slowbuffer.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/class_slowbuffer.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>废弃于: v6.0.0</span>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">稳定性: 0</a> - 废弃的: 使用 <a href="buffer.html#buffer_class_method_buffer_allocunsafeslow_size"><code>Buffer.allocUnsafeSlow()</code></a> 代替。</div><p>返回一个不放入分配池的 <code>Buffer</code>。</p>
<p>为了避免垃圾回收机制因创建太多独立分配的 Buffer 实例而过度使用，默认小于 4KB 的内存会从一个单一的大内存中切割出来。这种方式可以有效提高性能和内存利用率，避免 V8 频繁追踪和清理过多的 Persistent 对象。</p>
<p>开发者可能需要在不确定的时间段从内存池保留一小块内存的情况下，针对这种情况，就可以使用 <code>SlowBuffer</code> 类创建不放入分配池 <code>Buffer</code> 实例，然后通过内存拷贝获取目标数据。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_comment">// 需要保存的一小块内存</span>
<span class="sh_keyword">const</span> store <span class="sh_symbol">=</span> <span class="sh_symbol">[];</span>

socket<span class="sh_symbol">.</span><span class="sh_function">on</span><span class="sh_symbol">(</span><span class="sh_string">'readable'</span><span class="sh_symbol">,</span> <span class="sh_symbol">()</span> <span class="sh_symbol">=&gt;</span> <span class="sh_cbracket">{</span>
  <span class="sh_keyword">const</span> data <span class="sh_symbol">=</span> socket<span class="sh_symbol">.</span><span class="sh_function">read</span><span class="sh_symbol">();</span>

  <span class="sh_comment">// 为保留的数据分配内存</span>
  <span class="sh_keyword">const</span> sb <span class="sh_symbol">=</span> <span class="sh_function">SlowBuffer</span><span class="sh_symbol">(</span><span class="sh_number">10</span><span class="sh_symbol">);</span>

  <span class="sh_comment">// 将数据复制到新的分配的内存中</span>
  data<span class="sh_symbol">.</span><span class="sh_function">copy</span><span class="sh_symbol">(</span>sb<span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_number">10</span><span class="sh_symbol">);</span>

  store<span class="sh_symbol">.</span><span class="sh_function">push</span><span class="sh_symbol">(</span>sb<span class="sh_symbol">);</span>
<span class="sh_cbracket">}</span><span class="sh_symbol">);</span>
</code></pre>
<p><code>SlowBuffer</code> 应当仅仅作为开发者已经在他们的应用程序中观察到过度的内存保留之后的终极手段使用。</p>
<h3>new SlowBuffer(size)<span><a class="mark" href="buffer.html#buffer_new_slowbuffer_size" id="buffer_new_slowbuffer_size">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_new_slowbuffer_size">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/new_slowbuffer_size.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/new_slowbuffer_size.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>废弃于: v6.0.0</span>
</div><div class="api_stability api_stability_0"><a href="documentation.html#documentation_stability_index">稳定性: 0</a> - 废弃的: 使用 <a href="buffer.html#buffer_class_method_buffer_allocunsafeslow_size"><code>Buffer.allocUnsafeSlow()</code></a> 代替。</div><ul>
<li><code>size</code> 
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 新建的 <code>SlowBuffer</code> 期望的长度</li>
</ul>
<p>分配一个 <code>size</code> 字节的新的 <code>Buffer</code>。如果 <code>size</code> 大于 <a href="buffer.html#buffer_buffer_constants_max_length"><code>buffer.constants.MAX_LENGTH</code></a> 或小于 0，将会抛出 <a href="errors.html#errors_class_rangeerror"><code>RangeError</code></a> 错误。如果 <code>size</code> 为 0，则返回一个为 0 的 <code>Buffer</code>.</p>
<p><code>SlowBuffer</code> 实例的底层内存是 <em>未初始化的</em>。新建的 <code>SlowBuffer</code> 的内容是未知的，并且可能包含敏感数据。使用 <a href="buffer.html#buffer_buf_fill_value_offset_end_encoding"><code>buf.fill(0)</code></a> 初始化 <code>SlowBuffer</code> 为 0。</p>
<p>例子:</p>
<pre class="sh_sourceCode"><code class="lang-js"><span class="sh_keyword">const</span> <span class="sh_cbracket">{</span> SlowBuffer <span class="sh_cbracket">}</span> <span class="sh_symbol">=</span> <span class="sh_function">require</span><span class="sh_symbol">(</span><span class="sh_string">'buffer'</span><span class="sh_symbol">);</span>

<span class="sh_keyword">const</span> buf <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">SlowBuffer</span><span class="sh_symbol">(</span><span class="sh_number">5</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: (内容可能有变化): &lt;Buffer 78 e0 82 02 01&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>

buf<span class="sh_symbol">.</span><span class="sh_function">fill</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">);</span>

<span class="sh_comment">// 输出: &lt;Buffer 00 00 00 00 00&gt;</span>
console<span class="sh_symbol">.</span><span class="sh_function">log</span><span class="sh_symbol">(</span>buf<span class="sh_symbol">);</span>
</code></pre>
<h2>Buffer Constants<span><a class="mark" href="buffer.html#buffer_buffer_constants" id="buffer_buffer_constants">#</a></span></h2><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer_constants">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer_constants.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer_constants.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: 8.2.0</span>
</div><p>请注意<code>buffer.constants</code>是通过<code>require('buffer')</code>返回的<code>buffer</code>模块的一个属性，而不是全局<code>Buffer</code>或<code>Buffer</code>实例。 </p>
<h3>buffer.constants.MAX_LENGTH<span><a class="mark" href="buffer.html#buffer_buffer_constants_max_length" id="buffer_buffer_constants_max_length">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer_constants_max_length">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer_constants_max_length.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer_constants_max_length.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: 8.2.0</span>
</div><ul>
<li>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a>  单个<code>Buffer</code>实例允许的最大量度。</li>
</ul>
<p>在32位体系结构上，这个值是<code>(2^30)-1</code> (~1GB)。
在64位体系结构上，这个值是<code>(2^31)-1</code> (~2GB)。</p>
<p>也可在<a href="buffer.html#buffer_buffer_kmaxlength"><code>buffer.kMaxLength</code></a>查看该值。</p>
<h3>buffer.constants.MAX_STRING_LENGTH<span><a class="mark" href="buffer.html#buffer_buffer_constants_max_string_length" id="buffer_buffer_constants_max_string_length">#</a></span></h3><p style="font-size:12px;margin-top:-1em"><a href="en/buffer.html#buffer_buffer_constants_max_string_length">查看英文版</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-en/edit/master/buffer/buffer_constants_max_string_length.md">查看英文md文件</a> / <a rel="nofollow" target="_blank" href="https://github.com/nodejscn/node-api-cn/edit/master/buffer/buffer_constants_max_string_length.md">编辑中文md文件</a></p>
<div class="api_metadata">
<span>新增于: 8.2.0</span>
</div><ul>
<li>
            <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" class="type">&lt;integer&gt;</a> 单个<code>string</code>实例允许的最大长度。</li>
</ul>
<p>代表<code>string</code>能有的原始最大<code>长度</code>，以UTF-16代码为单位。</p>
<p>该值可能取决于正在使用的JS引擎。</p>

      </div>
    </div>
  </div>
  <!-- 搜索弹窗 -->
  <div id="modal_search_bg"></div>
  <div id="modal_search">
    <input placeholder="API 快速搜索" id="modal_search_input">
    <div id="modal_search_result"></div>
  </div>
  <!-- js -->
  <!--[if lt IE 10]><script src="/static/lib/placeholders.js?20170426"></script><![endif]-->
  <script src="./buffer_files/hm.js.下载"></script><script src="./buffer_files/api.js.下载"></script>

</body></html>